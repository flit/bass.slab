/*
 * Copyright (c) 2015-2016, Freescale Semiconductor, Inc.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * o Redistributions of source code must retain the above copyright notice, this list
 *   of conditions and the following disclaimer.
 *
 * o Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 *
 * o Neither the name of Freescale Semiconductor, Inc. nor the names of its
 *   contributors may be used to endorse or promote products derived from this
 *   software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
///////////////////////////////////////////////////////////////////////////////////////////////////
//                                      Includes Section
///////////////////////////////////////////////////////////////////////////////////////////////////

#include <stdint.h>
#include "Dialog7212.h"
// #include "SW_Timer.h"
#include "argon/argon.h"
#include <stdio.h>

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Defines & Macros Section
///////////////////////////////////////////////////////////////////////////////////////////////////

#define DA7212_CHECK_STATUS(x) (s_context.DriverStatus & (x))
#define DA7212_CONTROL_BUSY (s_context.DriverStatus & (DA7212_STATUS_BUSY_MASK))
#define DA7212_CONFIGURED (s_context.DriverStatus & (DA7212_STATUS_CONFIGURED_MASK))
#define DA7212_SET_STATUS(x) (s_context.DriverStatus |= (x))
#define DA7212_CLEAR_STATUS(x) (s_context.DriverStatus &= ~(x))

#define DA7212_ADDRESS (0x1A)

#define DA7212_50MS_TIMEOUT (50)

#define DA7212_CONTROL_BUFFER_SIZE (2)

#if (DIALOG7212_MASTER == TRUE)
#define DA7212_INIT_SIZE (41)
#else /* DA7212 as slave */
#define DA7212_INIT_SIZE (40)
#endif

#define DA7212_INPUT_CHANGE_REGISTERS (14)
#define DA7212_AUX_REGISTER_SIZE (33)
#define DA7212_MIC2_REGISTER_SIZE (33)
#define DA7212_MIC1_REGISTER_SIZE (24)

#define DA7212_DAC_MUTE_ENABLED (0xC0)
#define DA7212_DAC_MUTE_DISABLED (0x80)

#define DA7212_MAX_VOLUME_STEPS (15)
#define DA7212_MIN_VOLUME_STEPS (0)

#define DA7212_DAC_GAIN_MUTE (0x07)
#define DA7212_DAC_GAIN_M72DB (0x17)
#define DA7212_DAC_GAIN_M60DB (0x1F)
#define DA7212_DAC_GAIN_M54DB (0x27)
#define DA7212_DAC_GAIN_M48DB (0x2F)
#define DA7212_DAC_GAIN_M42DB (0x37)
#define DA7212_DAC_GAIN_M36DB (0x3F)
#define DA7212_DAC_GAIN_M30DB (0x47)
#define DA7212_DAC_GAIN_M24DB (0x4F)
#define DA7212_DAC_GAIN_M18DB (0x57)
#define DA7212_DAC_GAIN_M12DB (0x5F)
#define DA7212_DAC_GAIN_M6DB (0x67)
#define DA7212_DAC_GAIN_0DB (0x6F)
#define DA7213_DAC_GAIN_6DB (0x77)
#define DA7213_DAC_GAIN_12DB (0x7F)

#define DA7212_MAX_VOLUME_STEPS (15)

#define DA7212_CHANGE_FREQ_SIZE (0x05)

#if DA7212_44_1KHZ_NEED_PLL
#define DA7212_441_PLL_REGISTERS_TO_WRITE 5
#else
#define DA7212_441_PLL_REGISTERS_TO_WRITE 2
#endif

#if DA7212_32KHZ_48KHZ_96KHZ_NEED_PLL
#define DA7212_32KHZ_48KHZ_96KHZ_PLL_REGISTERS_TO_WRITE 5
#else
#define DA7212_16KHZ_32KHZ_48KHZ_96KHZ_PLL_REGISTERS_TO_WRITE 2
#endif

#define CLEAR_REGISTER (0x00)
/***************************************************************************************************/
/* * Register values. */

/******************Status registers*********************/
#define DIALOG7212_STATUS1                            0x02
#define DIALOG7212_PLL_STATUS                         0x03
#define DIALOG7212_AUX_L_GAIN_STATUS                  0x04
#define DIALOG7212_AUX_R_GAIN_STATUS                  0x05
#define DIALOG7212_MIC_1_GAIN_STATUS                  0x06
#define DIALOG7212_MIC_2_GAIN_STATUS                  0x07
#define DIALOG7212_MIXIN_L_GAIN_STATUS                0x08
#define DIALOG7212_MIXIN_R_GAIN_STATUS                0x09
#define DIALOG7212_ADC_L_GAIN_STATUS                  0x0A
#define DIALOG7212_ADC_R_GAIN_STATUS                  0x0B
#define DIALOG7212_DAC_L_GAIN_STATUS                  0x0C
#define DIALOG7212_DAC_R_GAIN_STATUS                  0x0D
#define DIALOG7212_HP_L_GAIN_STATUS                   0x0E
#define DIALOG7212_HP_R_GAIN_STATUS                   0x0F
#define DIALOG7212_LINE_GAIN_STATUS                   0x10
/***************System Initialisation Registers************/
#define DIALOG7212_CIF_CTRL                           0x1d
#define DIALOG7212_DIG_ROUTING_DAI                    0x21
#define DIALOG7212_SR                                 0x22
#define DIALOG7212_REFERENCES                         0x23
#define DIALOG7212_PLL_FRAC_TOP                       0x24
#define DIALOG7212_PLL_FRAC_BOT                       0x25
#define DIALOG7212_PLL_INTEGER                        0x26
#define DIALOG7212_PLL_CTRL                           0x27
#define DIALOG7212_DAI_CLK_MODE                       0x28
#define DIALOG7212_DAI_CTRL                           0x29
#define DIALOG7212_DIG_ROUTING_DAC                    0x2A
#define DIALOG7212_ALC_CTRL1                          0x2B
/************Input Gain/ Select Filter Registers**********/
#define DIALOG7212_AUX_L_GAIN                         0x30
#define DIALOG7212_AUX_R_GAIN                         0x31
#define DIALOG7212_MIXIN_L_SELECT                     0x32
#define DIALOG7212_MIXIN_R_SELECT                     0x33
#define DIALOG7212_MIXIN_L_GAIN                       0x34
#define DIALOG7212_MIXIN_R_GAIN                       0x35
#define DIALOG7212_ADC_L_GAIN                         0x36
#define DIALOG7212_ADC_R_GAIN                         0x37
#define DIALOG7212_ADC_FILTERS1                       0x38
#define DIALOG7212_MIC_1_GAIN                         0x39
#define DIALOG7212_MIC_2_GAIN                         0x3A
/************Output Gain/ Select Filter Registers**********/
#define DIALOG7212_DAC_FILTERS5                       0x40
#define DIALOG7212_DAC_FILTERS2                       0x41
#define DIALOG7212_DAC_FILTERS3                       0x42
#define DIALOG7212_DAC_FILTERS4                       0x43
#define DIALOG7212_DAC_FILTERS1                       0x44
#define DIALOG7212_DAC_L_GAIN                         0x45
#define DIALOG7212_DAC_R_GAIN                         0x46
#define DIALOG7212_CP_CTRL                            0x47
#define DIALOG7212_HP_L_GAIN                          0x48
#define DIALOG7212_HP_R_GAIN                          0x49
#define DIALOG7212_LINE_GAIN                          0x4A
#define DIALOG7212_MIXOUT_L_SELECT                    0x4B
#define DIALOG7212_MIXOUT_R_SELECT                    0x4C
/**************System Controller Registers(1)*************/
#define DIALOG7212_SYSTEM_MODES_INPUT                 0x50
#define DIALOG7212_SYSTEM_MODES_OUTPUT                0x51
/*****************Control Registers(2)********************/
#define DIALOG7212_AUX_L_CTRL                         0x60
#define DIALOG7212_AUX_R_CTRL                         0x61
#define DIALOG7212_MICBIAS_CTRL                       0x62
#define DIALOG7212_MIC_1_CTRL                         0x63
#define DIALOG7212_MIC_2_CTRL                         0x64
#define DIALOG7212_MIXIN_L_CTRL                       0x65
#define DIALOG7212_MIXIN_R_CTRL                       0x66
#define DIALOG7212_ADC_L_CTRL                         0x67
#define DIALOG7212_ADC_R_CTRL                         0x68
#define DIALOG7212_DAC_L_CTRL                         0x69
#define DIALOG7212_DAC_R_CTRL                         0x6A
#define DIALOG7212_HP_L_CTRL                          0x6B
#define DIALOG7212_HP_R_CTRL                          0x6C
#define DIALOG7212_LINE_CTRL                          0x6D
#define DIALOG7212_MIXOUT_L_CTRL                      0x6E
#define DIALOG7212_MIXOUT_R_CTRL                      0x6F
/************ Registers**********/

/****************Configuration Registers*****************/
#define DIALOG7212_LDO_CTRL                           0x90
#define DIALOG7212_GAIN_RAMP_CTRL                     0x92
#define DIALOG7212_MIC_CONFIG                         0x93
#define DIALOG7212_PC_COUNT                           0x94
#define DIALOG7212_CP_VOL_THRESHOLD1                  0x95
#define DIALOG7212_CP_DELAY                           0x96
#define DIALOG7212_CP_DETECTOR                        0x97
#define DIALOG7212_DAI_OFFSET                         0x98
#define DIALOG7212_DIG_CTRL                           0x99
#define DIALOG7212_ALC_CTRL2                          0x9A
#define DIALOG7212_ALC_CTRL3                          0x9B
#define DIALOG7212_ALC_NOISE                          0x9C
#define DIALOG7212_ALC_TARGET_MIN                     0x9D
#define DIALOG7212_ALC_TARGET_MAX                     0x9E
#define DIALOG7212_ALC_GAIN_LIMITS                    0x9F
#define DIALOG7212_ALC_ANA_GAIN_LIMITS                0xA0
#define DIALOG7212_ALC_ANTICLIP_CTRL                  0xA1
#define DIALOG7212_ALC_ANTICLIP_LEVEL                 0xA2
#define DIALOG7212_DAC_NG_SETUP_TIME                  0xAF
#define DIALOG7212_DAC_NG_OFF_THRESH                  0xB0
#define DIALOG7212_DAC_NG_ON_THRESH                   0xB1
#define DIALOG7212_DAC_NG_CTRL                        0xB2
//#define DIALOG7212_DAC_NG_SPARE                       0xB3
/************Tone Generation & Beep Registers************/
#define DIALOG7212_TONE_GEN_CFG1                      0xB4
#define DIALOG7212_TONE_GEN_CFG2                      0xB5
#define DIALOG7212_TONE_GEN_CYCLES                    0xB6
#define DIALOG7212_TONE_GEN_FREQ1_L                   0xB7
#define DIALOG7212_TONE_GEN_FREQ1_U                   0xB8
#define DIALOG7212_TONE_GEN_FREQ2_L                   0xB9
#define DIALOG7212_TONE_GEN_FREQ2_U                   0xBA
#define DIALOG7212_TONE_GEN_ON_PER                    0xBB
#define DIALOG7212_TONE_GEN_OFF_PER                   0xBC

/************System Controller Registers(2)*************/
#define DIALOG7212_SYSTEM_STATUS                      0xE0

#define DIALOG7212_SYSTEM_ACTIVE                      0xFD

/******************Driver DA7212 Macros*****************/

/******************Status registers*********************/
/* DIALOG7212_PLL_STATUS                         0x03*/
#define DIALOG7212_PLL_STATUS_BYPASS_ACTIVE_MASK     (1 << 3)
#define DIALOG7212_PLL_STATUS_MCLK_STATUS_MASK       (1 << 2)
#define DIALOG7212_PLL_STATUS_SRM_LOCK_MASK          (1 << 1)
#define DIALOG7212_PLL_STATUS_LOCK_MASK              (1 << 0)

/* DIALOG7212_AUX_L_GAIN_STATUS                  0x04*/
#define DIALOG7212_AUX_L_AMP_GAIN_STATUS_MASK    (0x3F)
#define DIALOG7212_AUX_L_AMP_GAIN_STATUS_SHIFT   (0)
#define DIALOG7212_AUX_L_AMP_GAIN_STATUS(x)      (x << DIALOG7212_AUX_L_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_AUX_R_GAIN_STATUS                  0x05*/
#define DIALOG7212_AUX_R_AMP_GAIN_STATUS_MASK    (0x3F)
#define DIALOG7212_AUX_R_AMP_GAIN_STATUS_SHIFT   (0)
#define DIALOG7212_AUX_R_AMP_GAIN_STATUS(x)      (x << DIALOG7212_AUX_R_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_MIC_1_GAIN_STATUS                  0x06*/
#define DIALOG7212_MIC_1_AMP_GAIN_STATUS_MASK    (0x07)
#define DIALOG7212_MIC_1_AMP_GAIN_STATUS_SHIFT   (0)
#define DIALOG7212_MIC_1_AMP_GAIN_STATUS(x)     (x << DIALOG7212_MIC_1_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_MIC_2_GAIN_STATUS                  0x07*/
#define DIALOG7212_MIC_2_AMP_GAIN_STATUS_MASK    (0x07)
#define DIALOG7212_MIC_2_AMP_GAIN_STATUS_SHIFT   (0)
#define DIALOG7212_MIC_2_AMP_GAIN_STATUS(x)     (x << DIALOG7212_MIC_2_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_MIXIN_L_GAIN_STATUS                0x08*/
#define DIALOG7212_MIXIN_L_AMP_GAIN_STATUS_MASK  (0x0F)
#define DIALOG7212_MIXIN_L_AMP_GAIN_STATUS_SHIFT (0)
#define DIALOG7212_MIXIN_L_AMP_GAIN_STATUS(x)    (x << DIALOG7212_MIXIN_L_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_MIXIN_R_GAIN_STATUS                0x09*/
#define DIALOG7212_MIXIN_R_AMP_GAIN_STATUS_MASK  (0x0F)
#define DIALOG7212_MIXIN_R_AMP_GAIN_STATUS_SHIFT (0)
#define DIALOG7212_MIXIN_R_AMP_GAIN_STATUS(x)    (x << DIALOG7212_MIXIN_R_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_ADC_L_GAIN_STATUS                  0x0A*/
#define DIALOG7212_ADC_L_GAIN_STATUS_MASK  		(0x7F)
#define DIALOG7212_ADC_L_GAIN_STATUS_SHIFT 		(0)
#define DIALOG7212_ADC_L_GAIN_STATUS_VAL(x)   		(x << DIALOG7212_ADC_L_GAIN_STATUS_SHIFT)

/* DIALOG7212_ADC_R_GAIN_STATUS                  0x0B*/
#define DIALOG7212_ADC_R_GAIN_STATUS_MASK  		(0x7F)
#define DIALOG7212_ADC_R_GAIN_STATUS_SHIFT 		(0)
#define DIALOG7212_ADC_R_GAIN_STATUS_VAL(x)    		(x << DIALOG7212_ADC_R_GAIN_STATUS_SHIFT)

/* DIALOG7212_DAC_L_GAIN_STATUS                  0x0C*/
#define DIALOG7212_DAC_L_GAIN_STATUS_MASK  		(0x7F)
#define DIALOG7212_DAC_L_GAIN_STATUS_SHIFT 		(0)
#define DIALOG7212_DAC_L_GAIN_STATUS_VAL(x)    		(x << DIALOG7212_DAC_L_GAIN_STATUS_SHIFT)

/* DIALOG7212_DAC_R_GAIN_STATUS                  0x0D*/
#define DIALOG7212_DAC_R_GAIN_STATUS_MASK  		(0x7F)
#define DIALOG7212_DAC_R_GAIN_STATUS_SHIFT 		(0)
#define DIALOG7212_DAC_R_GAIN_STATUS_VAL(x)    		(x << DIALOG7212_DAC_R_GAIN_STATUS_SHIFT)

/* DIALOG7212_HP_L_GAIN_STATUS                   0x0E*/
#define DIALOG7212_HP_L_AMP_GAIN_STATUS_MASK  	 (0x3F)
#define DIALOG7212_HP_L_AMP_GAIN_STATUS_SHIFT 	 (0)
#define DIALOG7212_HP_L_AMP_GAIN_STATUS(x)    	 (x << DIALOG7212_HP_L_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_HP_R_GAIN_STATUS                   0x0F*/
#define DIALOG7212_HP_R_AMP_GAIN_STATUS_MASK  	 (0x3F)
#define DIALOG7212_HP_R_AMP_GAIN_STATUS_SHIFT 	 (0)
#define DIALOG7212_HP_R_AMP_GAIN_STATUS(x)    	 (x << DIALOG7212_HP_R_AMP_GAIN_STATUS_SHIFT)

/* DIALOG7212_LINE_GAIN_STATUS                   0x10*/
#define DIALOG7212_LINE_AMP_GAIN_STATUS_MASK  	 (0x3F)
#define DIALOG7212_LINE_AMP_GAIN_STATUS_SHIFT 	 (0)
#define DIALOG7212_LINE_AMP_GAIN_STATUS(x)    	 (x << DIALOG7212_LINE_AMP_GAIN_STATUS_SHIFT)

/***************System Initialisation Registers************/

/* DIALOG7212_CIF_CTRL                           0x1d */
#define DIALOG7212_CIF_CTRL_CIF_REG_SOFT_RESET_MASK   (1 << 7)
#define DIALOG7212_CIF_CTRL_CIF_I2C_WRITE_MODE_MASK   (1 << 0)

/* DIALOG7212_DIG_ROUTING_DAI                    0x21 */
#define DIALOG7212_DIG_ROUTING_DAI_R_SRC_MASK       (0x30)
#define DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT      (4)
#define DIALOG7212_DIG_ROUTING_DAI_R_SRC_ADC_LEFT   (0 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_R_SRC_ADC_RIGHT  (1 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_R_SRC_DAI_LEFT   (2 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_R_SRC_DAI_RIGHT  (3 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_L_SRC_MASK       (0x03)
#define DIALOG7212_DIG_ROUTING_DAI_L_SRC_SHIFT      (4)
#define DIALOG7212_DIG_ROUTING_DAI_L_SRC_ADC_LEFT   (0 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_L_SRC_ADC_RIGHT  (1 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_L_SRC_DAI_LEFT   (2 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAI_L_SRC_DAI_RIGHT  (3 << DIALOG7212_DIG_ROUTING_DAI_R_SRC_SHIFT)

/* DIALOG7212_SR                                 0x22 */
#define DIALOG7212_SR_MASK      					(0x0F)
#define DIALOG7212_SR_SHIFT     					(0)
#define DIALOG7212_SR_8KHZ        					(1 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_11_025KHZ        				(2 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_12KHZ        					(3 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_16KHZ        					(5 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_22KHZ        					(6 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_24KHZ        					(7 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_32KHZ        					(9 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_44_1KHZ        				(10 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_48KHZ        					(11 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_88_2KHZ        				(14 << DIALOG7212_SR_SHIFT)
#define DIALOG7212_SR_96KHZ        					(15 << DIALOG7212_SR_SHIFT)

/* DIALOG7212_REFERENCES                         0x23 */
#define DIALOG7212_REFERENCES_VMID_FAST_DISCHARGE_MASK  (1 << 5)
#define DIALOG7212_REFERENCES_VMID_FAST_CHARGE_MASK     (1 << 4)
#define DIALOG7212_REFERENCES_BIAS_EN_MASK              (1 << 3)

/* DIALOG7212_PLL_FRAC_TOP                       0x24 */
#define DIALOG7212_PLL_FBDIV_FRAC_TOP_MASK  	 (0x1F)
#define DIALOG7212_PLL_FBDIV_FRAC_TOP_SHIFT 	 (0)
#define DIALOG7212_PLL_FBDIV_FRAC_TOP(x)    	 (x << DIALOG7212_PLL_FBDIV_FRAC_TOP_SHIFT)

/* DIALOG7212_PLL_FRAC_BOT                       0x25 */
#define DIALOG7212_PLL_FBDIV_FRAC_BOT_MASK  	 (0xFF)
#define DIALOG7212_PLL_FBDIV_FRAC_BOT_SHIFT 	 (0)
#define DIALOG7212_PLL_FBDIV_FRAC_BOT(x)    	 (x << DIALOG7212_PLL_FBDIV_FRAC_BOT_SHIFT)

/* DIALOG7212_PLL_INTEGER                        0x26 */
#define DIALOG7212_PLL_FBDIV_INTEGER_MASK  	     (0xFF)
#define DIALOG7212_PLL_FBDIV_INTEGER_SHIFT 	     (0)
#define DIALOG7212_PLL_FBDIV_INTEGER_BOT(x)    	 (x << DIALOG7212_PLL_FBDIV_INTEGER_SHIFT)

/* DIALOG7212_PLL_CTRL                           0x27 */
#define DIALOG7212_PLL_EN_MASK          (1 << 7)
#define DIALOG7212_PLL_SRM_EN_MASK      (1 << 6)
#define DIALOG7212_PLL_32K_MODE_MASK    (1 << 5)
#define DIALOG7212_PLL_MCLKSQR_EN_MASK  (1 << 4)
#define DIALOG7212_PLL_INDIV_MASK       (0x06)
#define DIALOG7212_PLL_INDIV_SHIFT      (2)
#define DIALOG7212_PLL_INDIV_2_10MHZ    (0 << DIALOG7212_PLL_INDIV_SHIFT)
#define DIALOG7212_PLL_INDIV_10_20MHZ   (1 << DIALOG7212_PLL_INDIV_SHIFT)
#define DIALOG7212_PLL_INDIV_20_40MHZ   (2 << DIALOG7212_PLL_INDIV_SHIFT)
#define DIALOG7212_PLL_INDIV_40_80MHZ   (3 << DIALOG7212_PLL_INDIV_SHIFT)

/* DIALOG7212_DAI_CLK_MODE                       0x28 */
#define DIALOG7212_DAI_CLK_EN_MASK		    	(1 << 7)
#define DIALOG7212_DAI_WCLK_POL__MASK			(1 << 3)
#define DIALOG7212_DAI_CLK_POL_MASK		    	(1 << 2)
#define DIALOG7212_DAI_BCLKS_PER_WCLK_MASK  	(0x03)
#define DIALOG7212_DAI_BCLKS_PER_WCLK_SHIFT 	(0)
#define DIALOG7212_DAI_BCLKS_PER_WCLK_BCLK32    (0 << DIALOG7212_DAI_BCLKS_PER_WCLK_SHIFT)
#define DIALOG7212_DAI_BCLKS_PER_WCLK_BCLK64    (1 << DIALOG7212_DAI_BCLKS_PER_WCLK_SHIFT)
#define DIALOG7212_DAI_BCLKS_PER_WCLK_BCLK128   (2 << DIALOG7212_DAI_BCLKS_PER_WCLK_SHIFT)
#define DIALOG7212_DAI_BCLKS_PER_WCLK_BCLK256   (3 << DIALOG7212_DAI_BCLKS_PER_WCLK_SHIFT)

/* DIALOG7212_DAI_CTRL                           0x29 */
#define DIALOG7212_DAI_EN_MASK		    		(1 << 7)
#define DIALOG7212_DAI_OE__MASK					(1 << 6)
#define DIALOG7212_DAI_TDM_MODE_EN_MASK		    (1 << 5)
#define DIALOG7212_DAI_MONO_MODE_MASK		    (1 << 4)
#define DIALOG7212_DAI_WORD_LENGTH_MASK  		(0x06)
#define DIALOG7212_DAI_WORD_LENGTH_SHIFT 		(2)
#define DIALOG7212_DAI_WORD_LENGTH_16B   		(0 << DIALOG7212_DAI_WORD_LENGTH_SHIFT)
#define DIALOG7212_DAI_WORD_LENGTH_20B  		(1 << DIALOG7212_DAI_WORD_LENGTH_SHIFT)
#define DIALOG7212_DAI_WORD_LENGTH_24B   		(2 << DIALOG7212_DAI_WORD_LENGTH_SHIFT)
#define DIALOG7212_DAI_WORD_LENGTH_32B  		(3 << DIALOG7212_DAI_WORD_LENGTH_SHIFT)
#define DIALOG7212_DAI_FORMAT_MASK  		    (0x03)
#define DIALOG7212_DAI_FORMAT_SHIFT 			(0)
#define DIALOG7212_DAI_FORMAT_I2S_MODE   		(0 << DIALOG7212_DAI_FORMAT_SHIFT)
#define DIALOG7212_DAI_FORMAT_LEFT_JUSTIFIED  	(1 << DIALOG7212_DAI_FORMAT_SHIFT)
#define DIALOG7212_DAI_FORMAT_RIGTH_JUSTIFIED   (2 << DIALOG7212_DAI_FORMAT_SHIFT)
#define DIALOG7212_DAI_FORMAT_DSP_MODE   		(3 << DIALOG7212_DAI_FORMAT_SHIFT)

/* DIALOG7212_DIG_ROUTING_DAC                    0x2A */
#define DIALOG7212_DIG_ROUTING_DAC_R_MONO_MASK				(1 << 7)
#define DIALOG7212_DIG_ROUTING_DAC_R_RSC_MASK				(0x30)
#define DIALOG7212_DIG_ROUTING_DAC_R_RSC_SHIFT 				(4)
#define DIALOG7212_DIG_ROUTING_DAC_R_RSC_ADC_L_OUTPUT   	(0 << DIALOG7212_DIG_ROUTING_DAC_R_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_R_RSC_ADC_R_OUTPUT  		(1 << DIALOG7212_DIG_ROUTING_DAC_R_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_R_RSC_DAC_L   			(2 << DIALOG7212_DIG_ROUTING_DAC_R_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_R_RSC_DAC_R  			(3 << DIALOG7212_DIG_ROUTING_DAC_R_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_L_MONO_MASK				(1 << 3)
#define DIALOG7212_DIG_ROUTING_DAC_L_RSC_MASK				(0x03)
#define DIALOG7212_DIG_ROUTING_DAC_L_RSC_SHIFT 				(0)
#define DIALOG7212_DIG_ROUTING_DAC_L_RSC_ADC_L_OUTPUT   	(0 << DIALOG7212_DIG_ROUTING_DAC_L_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_L_RSC_ADC_R_OUTPUT  		(1 << DIALOG7212_DIG_ROUTING_DAC_L_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_L_RSC_DAC_L   			(2 << DIALOG7212_DIG_ROUTING_DAC_L_RSC_SHIFT)
#define DIALOG7212_DIG_ROUTING_DAC_L_RSC_DAC_R  			(3 << DIALOG7212_DIG_ROUTING_DAC_L_RSC_SHIFT)

/* DIALOG7212_ALC_CTRL1                          0x2B */
#define DIALOG7212_ALC_R_EN_MASK      			(1 << 7)
#define DIALOG7212_ALC_CALIB_OVERFLOW_MASK  	(1 << 5)
#define DIALOG7212_ALC_AUTO_CALIB_EN_MASK    	(1 << 4)
#define DIALOG7212_ALC_L_EN_MASK      			(1 << 3)
#define DIALOG7212_ALC_CALIB_MODE_MASK      	(1 << 2)
#define DIALOG7212_ALC_SYNC_MODE_MASK   		(1 << 1)
#define DIALOG7212_ALC_OFFSET_EN_MASK  			(1 << 0)

/************Input Gain/ Select Filter Registers**********/
/* DIALOG7212_AUX_L_GAIN                         0x30 */
#define DIALOG7212_AUX_L_AMP_GAIN_MASK  	     (0x3F)
#define DIALOG7212_AUX_L_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_AUX_L_AMP_GAIN(x)    	     (x << DIALOG7212_AUX_L_AMP_GAIN_SHIFT)

/* DIALOG7212_AUX_R_GAIN                         0x31 */
#define DIALOG7212_AUX_R_AMP_GAIN_MASK  	     (0x3F)
#define DIALOG7212_AUX_R_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_AUX_R_AMP_GAIN(x)    	     (x << DIALOG7212_AUX_R_AMP_GAIN_SHIFT)

/* DIALOG7212_MIXIN_L_SELECT                     0x32 */
#define DIALOG7212_MIXIN_L_SELECT_DMIC_L_EN_MASK    (1 << 7)
#define DIALOG7212_MIXIN_L_SELECT_MIXING_R_MASK  	(1 << 3)
#define DIALOG7212_MIXIN_L_SELECT_MIC2_SEL_MASK    	(1 << 2)
#define DIALOG7212_MIXIN_L_SELECT_MIC1_SEL_MASK     (1 << 1)
#define DIALOG7212_MIXIN_L_SELECT_AUX_L_SEL_MASK    (1 << 0)

/* DIALOG7212_MIXIN_R_SELECT                     0x33 */
#define DIALOG7212_MIXIN_R_SELECT_DMIC_R_EN_MASK    (1 << 7)
#define DIALOG7212_MIXIN_R_SELECT_MIXING_L_MASK  	(1 << 3)
#define DIALOG7212_MIXIN_R_SELECT_MIC2_SEL_MASK    	(1 << 2)
#define DIALOG7212_MIXIN_R_SELECT_MIC1_SEL_MASK     (1 << 1)
#define DIALOG7212_MIXIN_R_SELECT_AUX_R_SEL_MASK    (1 << 0)

/* DIALOG7212_MIXIN_L_GAIN                       0x34 */
#define DIALOG7212_MIXIN_L_AMP_GAIN_MASK  	     (0x0F)
#define DIALOG7212_MIXIN_L_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_MIXIN_L_AMP_GAIN(x)    	     (x << DIALOG7212_MIXIN_L_AMP_GAIN_SHIFT)

/* DIALOG7212_MIXIN_R_GAIN                       0x35 */
#define DIALOG7212_MIXIN_R_AMP_GAIN_MASK  	     (0x0F)
#define DIALOG7212_MIXIN_R_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_MIXIN_R_AMP_GAIN(x)    	 	 (x << DIALOG7212_MIXIN_R_AMP_GAIN_SHIFT)

/* DIALOG7212_ADC_L_GAIN                         0x36 */
#define DIALOG7212_ADC_L_DIGITAL_GAIN_MASK  	     (0x7F)
#define DIALOG7212_ADC_L_DIGITAL_GAIN_SHIFT 	     (0)
#define DIALOG7212_ADC_L_DIGITAL_GAIN(x)    	     (x << DIALOG7212_ADC_L_DIGITAL_GAIN_SHIFT)

/* DIALOG7212_ADC_R_GAIN                         0x37 */
#define DIALOG7212_ADC_R_DIGITAL_GAIN_MASK  	     (0x7F)
#define DIALOG7212_ADC_R_DIGITAL_GAIN_SHIFT 	     (0)
#define DIALOG7212_ADC_R_DIGITAL_GAIN(x)    	     (x << DIALOG7212_ADC_R_DIGITAL_GAIN_SHIFT)

/* DIALOG7212_ADC_FILTERS1                       0x38 */
#define DIALOG7212_ADC_FILTERS1_ADC_HPF_EN_MASK    		    (1 << 7)
#define DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_MASK   (0x30)
#define DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_SHIFT  (5)
#define DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_2HZ	(0 << DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_4HZ    (1 << DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_8HZ    (2 << DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_16HZ   (3 << DIALOG7212_ADC_FILTERS1_ADC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_EN_MASK    		(1 << 3)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_MASK   (0x07)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT  (0)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_2_5HZ	(0 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_25HZ   (1 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_50HZ   (2 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_100HZ  (3 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_150HZ	(4 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_200HZ  (5 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_300HZ  (6 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_400HZ  (7 << DIALOG7212_ADC_FILTERS1_ADC_VOICE_HPF_CORNER_SHIFT)

/* DIALOG7212_MIC_1_GAIN                         0x39 */
#define DIALOG7212_MIC_1_AMP_GAIN_MASK   (0x07)
#define DIALOG7212_MIC_1_AMP_GAIN_SHIFT  (0)
#define DIALOG7212_MIC_1_AMP_GAIN_N6DB	 (0 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_0DB    (1 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_P6DB   (2 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_P12DB  (3 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_P18DB	 (4 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_P24DB  (5 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_P30DB  (6 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_1_AMP_GAIN_P36DB  (7 << DIALOG7212_MIC_1_AMP_GAIN_SHIFT)

/* DIALOG7212_MIC_2_GAIN                         0x3A */
#define DIALOG7212_MIC_2_AMP_GAIN_MASK   (0x07)
#define DIALOG7212_MIC_2_AMP_GAIN_SHIFT  (0)
#define DIALOG7212_MIC_2_AMP_GAIN_N6DB	 (0 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_0DB    (1 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_P6DB   (2 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_P12DB  (3 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_P18DB	 (4 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_P24DB  (5 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_P30DB  (6 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)
#define DIALOG7212_MIC_2_AMP_GAIN_P36DB  (7 << DIALOG7212_MIC_2_AMP_GAIN_SHIFT)

/************Output Gain/ Select Filter Registers**********/
/* DIALOG7212_DAC_FILTERS5                       0x40 */
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_EN_MASK      (1 << 7)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_MASK    (0x07)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT   (4)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_1	      (0 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_2       (1 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_4       (2 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_8       (3 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_16	  (4 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_32  	  (5 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)
#define DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_64	  (6 << DIALOG7212_DAC_FILTERS5_SOFTMUTE_RATE_SHIFT)

/* DIALOG7212_DAC_FILTERS2                       0x41 */
#define DIALOG7212_DAC_FILTERS2_EQ_BAND2_MASK  	     (0xF0)
#define DIALOG7212_DAC_FILTERS2_EQ_BAND2_SHIFT 	     (4)
#define DIALOG7212_DAC_FILTERS2_EQ_BAND2(x)    	 	 (x << DIALOG7212_DAC_FILTERS2_EQ_BAND2_SHIFT)
#define DIALOG7212_DAC_FILTERS2_EQ_BAND1_MASK  	     (0x0F)
#define DIALOG7212_DAC_FILTERS2_EQ_BAND1_SHIFT 	     (0)
#define DIALOG7212_DAC_FILTERS2_EQ_BAND1(x)    	 	 (x << DIALOG7212_DAC_FILTERS2_EQ_BAND1_SHIFT)

/* DIALOG7212_DAC_FILTERS3                       0x42 */
#define DIALOG7212_DAC_FILTERS3_EQ_BAND4_MASK  	     (0xF0)
#define DIALOG7212_DAC_FILTERS3_EQ_BAND4_SHIFT 	     (4)
#define DIALOG7212_DAC_FILTERS3_EQ_BAND4(x)    	 	 (x << DIALOG7212_DAC_FILTERS2_EQ_BAND4_SHIFT)
#define DIALOG7212_DAC_FILTERS3_EQ_BAND3_MASK  	     (0x0F)
#define DIALOG7212_DAC_FILTERS3_EQ_BAND3_SHIFT 	     (0)
#define DIALOG7212_DAC_FILTERS3_EQ_BAND3(x)    	 	 (x << DIALOG7212_DAC_FILTERS2_EQ_BAND3_SHIFT)

/* DIALOG7212_DAC_FILTERS4                       0x43 */
#define DIALOG7212_DAC_FILTERS4_EQ_EN_MASK           (1 << 7)
#define DIALOG7212_DAC_FILTERS4_EQ_BAND5_MASK  	     (0x0F)
#define DIALOG7212_DAC_FILTERS4_EQ_BAND5_SHIFT 	     (0)
#define DIALOG7212_DAC_FILTERS4_EQ_BAND5(x)    	 	 (x << DIALOG7212_DAC_FILTERS2_EQ_BAND5_SHIFT)

/* DIALOG7212_DAC_FILTERS1                       0x44 */
#define DIALOG7212_DAC_FILTERS1_HPF_EN_MASK               (1 << 7)
#define DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_MASK   (0x30)
#define DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_SHIFT  (5)
#define DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_2HZ	(0 << DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_4HZ    (1 << DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_8HZ    (2 << DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_16HZ   (3 << DIALOG7212_DAC_FILTERS1_DAC_AUDIO_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_EN_MASK    		(1 << 3)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_MASK   (0x07)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT  (0)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_2_5HZ	(0 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_25HZ   (1 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_50HZ   (2 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_100HZ  (3 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_150HZ	(4 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_200HZ  (5 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_300HZ  (6 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)
#define DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_400HZ  (7 << DIALOG7212_DAC_FILTERS1_DAC_VOICE_HPF_CORNER_SHIFT)

/* DIALOG7212_DAC_L_GAIN                         0x45 */
#define DIALOG7212_DAC_L_DIGITAL_GAIN_MASK  	     (0x7F)
#define DIALOG7212_DAC_L_DIGITAL_GAIN_SHIFT 	     (0)
#define DIALOG7212_DAC_L_DIGITAL_GAIN(x)    	     (x << DIALOG7212_DAC_L_DIGITAL_GAIN_SHIFT)

/* DIALOG7212_DAC_R_GAIN                         0x46 */
#define DIALOG7212_DAC_R_DIGITAL_GAIN_MASK  	     (0x7F)
#define DIALOG7212_DAC_R_DIGITAL_GAIN_SHIFT 	     (0)
#define DIALOG7212_DAC_R_DIGITAL_GAIN(x)    	     (x << DIALOG7212_DAC_R_DIGITAL_GAIN_SHIFT)

/* DIALOG7212_CP_CTRL                            0x47 */
#define DIALOG7212_CP_CTRL_EN_MASK    	                (1 << 7)
#define DIALOG7212_CP_CTRL_SMALL_SWIT_CH_FREQ_EN_MASK  	(1 << 6)
#define DIALOG7212_CP_CTRL_MCHANGE_MASK        			(0x30)
#define DIALOG7212_CP_CTRL_MCHANGE_SHIFT  				(4)
#define DIALOG7212_CP_CTRL_MCHANGE_CP_MOD				(0 << DIALOG7212_CP_CTRL_MCHANGE_SHIFT)
#define DIALOG7212_CP_CTRL_MCHANGE_PGA    				(1 << DIALOG7212_CP_CTRL_MCHANGE_SHIFT)
#define DIALOG7212_CP_CTRL_MCHANGE_DAC    				(2 << DIALOG7212_CP_CTRL_MCHANGE_SHIFT)
#define DIALOG7212_CP_CTRL_MCHANGE_OUTPUT   			(3 << DIALOG7212_CP_CTRL_MCHANGE_SHIFT)
#define DIALOG7212_CP_CTRL_MOD_MASK        				(0x0C)
#define DIALOG7212_CP_CTRL_MOD_SHIFT  					(2)
#define DIALOG7212_CP_CTRL_MOD_STANDBY					(0 << DIALOG7212_CP_CTRL_MOD_SHIFT)
#define DIALOG7212_CP_CTRL_MOD_CPVDD_2    				(2 << DIALOG7212_CP_CTRL_MOD_SHIFT)
#define DIALOG7212_CP_CTRL_MOD_CPVDD_1   				(3 << DIALOG7212_CP_CTRL_MOD_SHIFT)
#define DIALOG7212_CP_CTRL_ANALOG_VLL_MASK        		(0x03)
#define DIALOG7212_CP_CTRL_ANALOG_VLL_SHIFT  			(0)
#define DIALOG7212_CP_CTRL_ANALOG_VLL_NO_FEEDBACK	 	(0 << DIALOG7212_CP_CTRL_ANALOG_VLL_SHIFT)
#define DIALOG7212_CP_CTRL_ANALOG_VLL_LV_BOOSTS_CP    	(1 << DIALOG7212_CP_CTRL_ANALOG_VLL_SHIFT)
#define DIALOG7212_CP_CTRL_ANALOG_VLL_LV_RESTART_CP   	(2 << DIALOG7212_CP_CTRL_ANALOG_VLL_SHIFT)

/* DIALOG7212_HP_L_GAIN                          0x48 */
#define DIALOG7212_HP_L_AMP_GAIN_MASK  	     (0x3F)
#define DIALOG7212_HP_L_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_HP_L_AMP_GAIN(x)    	     (x << DIALOG7212_HP_L_AMP_GAIN_SHIFT)

/* DIALOG7212_HP_R_GAIN                          0x49 */
#define DIALOG7212_HP_R_AMP_GAIN_MASK  	     (0x3F)
#define DIALOG7212_HP_R_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_HP_R_AMP_GAIN(x)    	     (x << DIALOG7212_HP_R_AMP_GAIN_SHIFT)

/* DIALOG7212_LINE_GAIN                          0x4A */
#define DIALOG7212_LINE_AMP_GAIN_MASK  	     (0x3F)
#define DIALOG7212_LINE_AMP_GAIN_SHIFT 	     (0)
#define DIALOG7212_LINE_AMP_GAIN(x)    	     (x << DIALOG7212_LINE_AMP_GAIN_SHIFT)

/* DIALOG7212_MIXOUT_L_SELECT                    0x4B */
#define DIALOG7212_MIXOUT_L_SELECT_MIXIN_R_INV_MASK    	(1 << 6)
#define DIALOG7212_MIXOUT_L_SELECT_MIXIN_L_INV_MASK  	(1 << 5)
#define DIALOG7212_MIXOUT_L_SELECT_AUX_L_INV_MASK    	(1 << 4)
#define DIALOG7212_MIXOUT_L_SELECT_DAC_L_MASK      		(1 << 3)
#define DIALOG7212_MIXOUT_L_SELECT_MIXIN_R_MASK      	(1 << 2)
#define DIALOG7212_MIXOUT_L_SELECT_MIXIN_L_MASK   		(1 << 1)
#define DIALOG7212_MIXOUT_L_SELECT_AUX_L_MASK  			(1 << 0)

/* DIALOG7212_MIXOUT_R_SELECT                    0x4C */
#define DIALOG7212_MIXOUT_R_SELECT_MIXIN_L_INV_MASK    	(1 << 6)
#define DIALOG7212_MIXOUT_R_SELECT_MIXIN_R_INV_MASK  	(1 << 5)
#define DIALOG7212_MIXOUT_R_SELECT_AUX_R_INV_MASK    	(1 << 4)
#define DIALOG7212_MIXOUT_R_SELECT_DAC_R_MASK      		(1 << 3)
#define DIALOG7212_MIXOUT_R_SELECT_MIXIN_L_MASK      	(1 << 2)
#define DIALOG7212_MIXOUT_R_SELECT_MIXIN_R_MASK   		(1 << 1)
#define DIALOG7212_MIXOUT_R_SELECT_AUX_R_MASK  			(1 << 0)

 /**************System Controller Registers(1)*************/
/* DIALOG7212_SYSTEM_MODES_INPUT                 0x50 */
#define DIALOG7212_SYSTEM_MODES_INPUT_ADC_R_MASK    	(1 << 7)
#define DIALOG7212_SYSTEM_MODES_INPUT_ADC_L_MASK    	(1 << 6)
#define DIALOG7212_SYSTEM_MODES_INPUT_MIXIN_R_MASK  	(1 << 5)
#define DIALOG7212_SYSTEM_MODES_INPUT_MIXIN_L_MASK    	(1 << 4)
#define DIALOG7212_SYSTEM_MODES_INPUT_MIC_2_MASK      	(1 << 3)
#define DIALOG7212_SYSTEM_MODES_INPUT_MIC_1_MASK      	(1 << 2)
#define DIALOG7212_SYSTEM_MODES_INPUT_MIC_BIAS_MASK   	(1 << 1)
#define DIALOG7212_SYSTEM_MODES_INPUT_MODE_SUBMIT_MASK  (1 << 0)

/* DIALOG7212_SYSTEM_MODES_OUTPUT                0x51 */
#define DIALOG7212_SYSTEM_MODES_OUTPUT_DAC_R_MASK    	(1 << 7)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_DAC_L_MASK    	(1 << 6)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_HP_R_MASK  		(1 << 5)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_HP_L_MASK    	(1 << 4)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_LINE_MASK      	(1 << 3)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_AUX_R_MASK      	(1 << 2)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_AUX_L_MASK   	(1 << 1)
#define DIALOG7212_SYSTEM_MODES_OUTPUT_MODE_SUBMIT_MASK (1 << 0)

/*****************Control Registers(2)********************/
/* DIALOG7212_AUX_L_CTRL                         0x60 */
#define DIALOG7212_AUX_L_CTRL_AMP_EN_MASK    	         (1 << 7)
#define DIALOG7212_AUX_L_CTRL_AMP_MUTE_EN_MASK    	     (1 << 6)
#define DIALOG7212_AUX_L_CTRL_AMP_RAMP_EN_MASK  		 (1 << 5)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_EN_MASK    		 (1 << 4)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_MASK   		 (0x0C)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_SHIFT  		 (2)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_INPUT_AUX_L	 (0 << DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_SHIFT)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_INPUT_AUX_L_IF  (1 << DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_SHIFT)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_NO_ZC_POSSBLE   (2 << DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_SHIFT)
#define DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_OUTPUT_AUX_L    (3 << DIALOG7212_AUX_L_CTRL_AMP_ZC_SEL_SHIFT)

/* DIALOG7212_AUX_R_CTRL                         0x61 */
#define DIALOG7212_AUX_R_CTRL_AMP_EN_MASK    	         (1 << 7)
#define DIALOG7212_AUX_R_CTRL_AMP_MUTE_EN_MASK    	     (1 << 6)
#define DIALOG7212_AUX_R_CTRL_AMP_RAMP_EN_MASK  		 (1 << 5)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_EN_MASK    		 (1 << 4)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_MASK   		 (0x0C)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_SHIFT  		 (2)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_INPUT_AUX_R	 (0 << DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_SHIFT)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_INPUT_AUX_R_IF  (1 << DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_SHIFT)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_NO_ZC_POSSBLE   (2 << DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_SHIFT)
#define DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_OUTPUT_AUX_R    (3 << DIALOG7212_AUX_R_CTRL_AMP_ZC_SEL_SHIFT)

/* DIALOG7212_MICBIAS_CTRL                       0x62 */
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_EN_MASK		(1 << 7)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_LEVEL_MASK		(0x30)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_SHIFT 			(4)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_1_6V   	  	(0 << DIALOG7212_MICBIAS_CTRL_MICBIAS2_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_2_2V  		  	(1 << DIALOG7212_MICBIAS_CTRL_MICBIAS2_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_2_5V   	  	(2 << DIALOG7212_MICBIAS_CTRL_MICBIAS2_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS2_3_0V  			(3 << DIALOG7212_MICBIAS_CTRL_MICBIAS2_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_EN_MASK		(1 << 3)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_LEVEL_MASK		(0x03)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_SHIFT 			(0)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_1_6V   	  	(0 << DIALOG7212_MICBIAS_CTRL_MICBIAS1_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_2_2V  		  	(1 << DIALOG7212_MICBIAS_CTRL_MICBIAS1_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_2_5V   	  	(2 << DIALOG7212_MICBIAS_CTRL_MICBIAS1_SHIFT)
#define DIALOG7212_MICBIAS_CTRL_MICBIAS1_3_0V  			(3 << DIALOG7212_MICBIAS_CTRL_MICBIAS1_SHIFT)

/* DIALOG7212_MIC_1_CTRL                         0x63 */
#define DIALOG7212_MIC_1_CTRL_AMP_EN_MASK				(1 << 7)
#define DIALOG7212_MIC_1_CTRL_AMP_MUTE_EN_MASK			(1 << 6)
#define DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_MASK			(0x0C)
#define DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_SHIFT 			(2)
#define DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_DIFFERENTIAL   (0 << DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_SHIFT)
#define DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_MIC_1_P  		(1 << DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_SHIFT)
#define DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_MIC_1_N   	  	(2 << DIALOG7212_MIC_1_CTRL_AMP_IN_SEL_SHIFT)

/* DIALOG7212_MIC_2_CTRL                         0x64 */
#define DIALOG7212_MIC_2_CTRL_AMP_EN_MASK				(1 << 7)
#define DIALOG7212_MIC_2_CTRL_AMP_MUTE_EN_MASK			(1 << 6)
#define DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_MASK			(0x0C)
#define DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_SHIFT 			(2)
#define DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_DIFFERENTIAL   (0 << DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_SHIFT)
#define DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_MIC_2_P  		(1 << DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_SHIFT)
#define DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_MIC_2_N   	  	(2 << DIALOG7212_MIC_2_CTRL_AMP_IN_SEL_SHIFT)

/* DIALOG7212_MIXIN_L_CTRL                       0x65 */
#define DIALOG7212_MIXIN_L_CTRL_AMP_EN_MASK    		(1 << 7)
#define DIALOG7212_MIXIN_L_CTRL_AMP_MUTE_EN_MASK    (1 << 6)
#define DIALOG7212_MIXIN_L_CTRL_AMP_RAMP_EN_MASK  	(1 << 5)
#define DIALOG7212_MIXIN_L_CTRL_AMP_ZC_EN_MASK    	(1 << 4)
#define DIALOG7212_MIXIN_L_CTRL_AMP_MIX_EN_MASK     (1 << 3)

/* DIALOG7212_MIXIN_R_CTRL                       0x66 */
#define DIALOG7212_MIXIN_R_CTRL_AMP_EN_MASK    		(1 << 7)
#define DIALOG7212_MIXIN_R_CTRL_AMP_MUTE_EN_MASK    (1 << 6)
#define DIALOG7212_MIXIN_R_CTRL_AMP_RAMP_EN_MASK  	(1 << 5)
#define DIALOG7212_MIXIN_R_CTRL_AMP_ZC_EN_MASK    	(1 << 4)
#define DIALOG7212_MIXIN_R_CTRL_AMP_MIX_EN_MASK     (1 << 3)

/* DIALOG7212_ADC_L_CTRL                         0x67 */
#define DIALOG7212_ADC_L_CTRL_ADC_EN_MASK    		(1 << 7)
#define DIALOG7212_ADC_L_CTRL_ADC_MUTE_EN_MASK     	(1 << 6)
#define DIALOG7212_ADC_L_CTRL_ADC_RAMP_EN_MASK   	(1 << 5)

/* DIALOG7212_ADC_R_CTRL                         0x68 */
#define DIALOG7212_ADC_R_CTRL_ADC_EN_MASK    		(1 << 7)
#define DIALOG7212_ADC_R_CTRL_ADC_MUTE_EN_MASK     	(1 << 6)
#define DIALOG7212_ADC_R_CTRL_ADC_RAMP_EN_MASK   	(1 << 5)

/* DIALOG7212_DAC_L_CTRL                         0x69 */
#define DIALOG7212_DAC_L_CTRL_ADC_EN_MASK    		(1 << 7)
#define DIALOG7212_DAC_L_CTRL_ADC_MUTE_EN_MASK     	(1 << 6)
#define DIALOG7212_DAC_L_CTRL_ADC_RAMP_EN_MASK   	(1 << 5)

/* DIALOG7212_DAC_R_CTRL                         0x6A */
#define DIALOG7212_DAC_R_CTRL_ADC_EN_MASK    		(1 << 7)
#define DIALOG7212_DAC_R_CTRL_ADC_MUTE_EN_MASK     	(1 << 6)
#define DIALOG7212_DAC_R_CTRL_ADC_RAMP_EN_MASK   	(1 << 5)

/* DIALOG7212_HP_L_CTRL                          0x6B */
#define DIALOG7212_HP_L_CTRL_AMP_EN_MASK    				(1 << 7)
#define DIALOG7212_HP_L_CTRL_AMP_MUTE_EN_MASK    			(1 << 6)
#define DIALOG7212_HP_L_CTRL_AMP_RAMP_EN_MASK  				(1 << 5)
#define DIALOG7212_HP_L_CTRL_AMP_ZC_EN_MASK    				(1 << 4)
#define DIALOG7212_HP_L_CTRL_AMP_OE_MASK     				(1 << 3)
#define DIALOG7212_HP_L_CTRL_AMP_MIN_GAIN_EN_MASK     		(1 << 2)

/* DIALOG7212_HP_R_CTRL                          0x6C */
#define DIALOG7212_HP_R_CTRL_AMP_EN_MASK    				(1 << 7)
#define DIALOG7212_HP_R_CTRL_AMP_MUTE_EN_MASK    			(1 << 6)
#define DIALOG7212_HP_R_CTRL_AMP_RAMP_EN_MASK  				(1 << 5)
#define DIALOG7212_HP_R_CTRL_AMP_ZC_EN_MASK    				(1 << 4)
#define DIALOG7212_HP_R_CTRL_AMP_OE_MASK     				(1 << 3)
#define DIALOG7212_HP_R_CTRL_AMP_MIN_GAIN_EN_MASK     		(1 << 2)

/* DIALOG7212_LINE_CTRL                          0x6D */
#define DIALOG7212_LINE_CTRL_AMP_EN_MASK    				(1 << 7)
#define DIALOG7212_LINE_CTRL_AMP_MUTE_EN_MASK    			(1 << 6)
#define DIALOG7212_LINE_CTRL_AMP_RAMP_EN_MASK  				(1 << 5)
#define DIALOG7212_LINE_CTRL_AMP_OE_MASK     				(1 << 3)
#define DIALOG7212_LINE_CTRL_AMP_MIN_GAIN_EN_MASK     		(1 << 2)

/* DIALOG7212_MIXOUT_L_CTRL                      0x6E */
#define DIALOG7212_MIXOUT_L_CTRL_AMP_EN_MASK    			(1 << 7)
#define DIALOG7212_MIXOUT_L_CTRL_AMP_SOFT_MIX_EN_MASK     	(1 << 4)
#define DIALOG7212_MIXOUT_L_CTRL_AMP_MIX_EN_MASK     		(1 << 3)

/* DIALOG7212_MIXOUT_R_CTRL                      0x6F */
#define DIALOG7212_MIXOUT_R_CTRL_AMP_EN_MASK    			(1 << 7)
#define DIALOG7212_MIXOUT_R_CTRL_AMP_SOFT_MIX_EN_MASK     	(1 << 4)
#define DIALOG7212_MIXOUT_R_CTRL_AMP_MIX_EN_MASK     		(1 << 3)

/*****************Configuration Registers*****************/
/* DIALOG7212_LDO_CTRL                           0x90 */
#define DIALOG7212_LDO_CTRL_EN_MASK  				(1 << 7)
#define DIALOG7212_LDO_CTRL_LEVEL_SELECT_MASK  		(0x30)
#define DIALOG7212_LDO_CTRL_LEVEL_SELECT_SHIFT  	(4)
#define DIALOG7212_LDO_CTRL_LEVEL_SELECT_1_05V   	(0 << DIALOG7212_LDO_CTRL_LEVEL_SELECT_SHIFT)
#define DIALOG7212_LDO_CTRL_LEVEL_SELECT_1_10V  	(1 << DIALOG7212_LDO_CTRL_LEVEL_SELECT_SHIFT)
#define DIALOG7212_LDO_CTRL_LEVEL_SELECT_1_20V   	(2 << DIALOG7212_LDO_CTRL_LEVEL_SELECT_SHIFT)
#define DIALOG7212_LDO_CTRL_LEVEL_SELECT_1_40V   	(3 << DIALOG7212_LDO_CTRL_LEVEL_SELECT_SHIFT)

/* DIALOG7212_GAIN_RAMP_CTRL                     0x92 */
#define DIALOG7212_GAIN_RAMP_CTRL_RATE_MASK   		(0x03)
#define DIALOG7212_GAIN_RAMP_CTRL_RATE_SHIFT  		(0)
#define DIALOG7212_GAIN_RAMP_CTRL_RATE_NR_DIV_8    	(0 << DIALOG7212_GAIN_RAMP_CTRL_RATE_SHIFT)
#define DIALOG7212_GAIN_RAMP_CTRL_RATE_NR_DIV_16   	(1 << DIALOG7212_GAIN_RAMP_CTRL_RATE_SHIFT)
#define DIALOG7212_GAIN_RAMP_CTRL_RATE_NR_MUL_16   	(2 << DIALOG7212_GAIN_RAMP_CTRL_RATE_SHIFT)
#define DIALOG7212_GAIN_RAMP_CTRL_RATE_NR_MUL_32   	(3 << DIALOG7212_GAIN_RAMP_CTRL_RATE_SHIFT)

/* DIALOG7212_MIC_CONFIG                         0x93 */
#define DIALOG7212_MIC_CONFIG_DMIC_CLK_RATE_MASK     (1 << 2)
#define DIALOG7212_MIC_CONFIG_DMIC_SAMPLEPHASE_MASK  (1 << 1)
#define DIALOG7212_MIC_CONFIG_DMIC_DATA_SEL_MASK     (1 << 0)

/* DIALOG7212_PC_COUNT                           0x94 */
#define DIALOG7212_PC_COUNT_RESYNC_MASK  (1 << 1)
#define DIALOG7212_PC_COUNT_FREERU_MASK  (1 << 0)

/* DIALOG7212_CP_VOL_THRESHOLD1                  0x95 */
#define DIALOG7212_CP_VOL_THRESHOLD1_VDD2_MASK  	     (0x3F)
#define DIALOG7212_CP_VOL_THRESHOLD1_VDD2_SHIFT 	     (0)
#define DIALOG7212_CP_VOL_THRESHOLD1_VDD2(x)    	     (x << DIALOG7212_CP_VOL_THRESHOLD1_VDD2_SHIFT)

/* DIALOG7212_CP_DELAY                           0x96 */
#define DIALOG7212_CP_DELAY_ON_OFF_MASK  	     	(0xC0)
#define DIALOG7212_CP_DELAY_ON_OFF_SHIFT 	     	(6)
#define DIALOG7212_CP_DELAY_ON_OFF_LIMITER_ON    	(0 << DIALOG7212_CP_DELAY_ON_OFF_SHIFT)
#define DIALOG7212_CP_DELAY_ON_OFF_LIMITER_OFF    	(1 << DIALOG7212_CP_DELAY_ON_OFF_SHIFT)
#define DIALOG7212_CP_DELAY_ON_OFF_LIMITER_AUT    	(2 << DIALOG7212_CP_DELAY_ON_OFF_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_MASK  	    (0x38)
#define DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT 	    (3)
#define DIALOG7212_CP_DELAY_TAU_DELAY_0MS    		(0 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_2MS    		(1 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_4MS   		(2 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_16MS    		(3 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_64MS   		(4 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_128MS   		(5 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_256MS    		(6 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_TAU_DELAY_512MS   		(7 << DIALOG7212_CP_DELAY_TAU_DELAY_SHIFT)
#define DIALOG7212_CP_DELAY_FCONTROL_MASK  	     	(0x07)
#define DIALOG7212_CP_DELAY_FCONTROL_SHIFT 	     	(0)
#define DIALOG7212_CP_DELAY_FCONTROL_1MHZ    		(0 << DIALOG7212_CP_DELAY_FCONTROL_SHIFT)
#define DIALOG7212_CP_DELAY_FCONTROL_500KHZ    		(1 << DIALOG7212_CP_DELAY_FCONTROL_SHIFT)
#define DIALOG7212_CP_DELAY_FCONTROL_250KHZ   		(2 << DIALOG7212_CP_DELAY_FCONTROL_SHIFT)
#define DIALOG7212_CP_DELAY_FCONTROL_125KHZ    		(3 << DIALOG7212_CP_DELAY_FCONTROL_SHIFT)
#define DIALOG7212_CP_DELAY_FCONTROL_63KHZ   		(4 << DIALOG7212_CP_DELAY_FCONTROL_SHIFT)
#define DIALOG7212_CP_DELAY_FCONTROL_0HZ_OR_1MHZ   	(5 << DIALOG7212_CP_DELAY_FCONTROL_SHIFT)

/* DIALOG7212_CP_DETECTOR                        0x97 */
#define DIALOG7212_CP_DETECTOR_DROP_MASK   		(0x03)
#define DIALOG7212_CP_DETECTOR_DROP_SHIFT  		(0)
#define DIALOG7212_CP_DETECTOR_DROP_25MV    	(0 << DIALOG7212_CP_DETECTOR_DROP_SHIFT)
#define DIALOG7212_CP_DETECTOR_DROP_50MV   	    (1 << DIALOG7212_CP_DETECTOR_DROP_SHIFT)
#define DIALOG7212_CP_DETECTOR_DROP_75MV   	    (2 << DIALOG7212_CP_DETECTOR_DROP_SHIFT)
#define DIALOG7212_CP_DETECTOR_DROP_100MV   	(3 << DIALOG7212_CP_DETECTOR_DROP_SHIFT)

/* DIALOG7212_DAI_OFFSET                         0x98 */
#define DIALOG7212_DAI_OFFSET_MASK  	     (0xFF)
#define DIALOG7212_DAI_OFFSET_SHIFT 	     (0)
#define DIALOG7212_DAI_OFFSET_VAL(x)    	 (x << DIALOG7212_DAI_OFFSET_SHIFT)

/* DIALOG7212_DIG_CTRL                           0x99 */
#define DIALOG7212_DIG_CTRL_R_INV_MASK     (1 << 7)
#define DIALOG7212_DIG_CTRL_L_INV_MASK     (1 << 3)

/* DIALOG7212_ALC_CTRL2                          0x9A */
#define DIALOG7212_ALC_CTRL2_RELEASE_MASK		(0xF0)
#define DIALOG7212_ALC_CTRL2_RELEASE_SHIFT      (4)
#define DIALOG7212_ALC_CTRL2_RELEASE(x)         (x << DIALOG7212_ALC_CTRL2_RELEASE_SHIFT)
#define DIALOG7212_ALC_CTRL2_ATTACK_MASK		(0x0F)
#define DIALOG7212_ALC_CTRL2_ATTACK_SHIFT       (0)
#define DIALOG7212_ALC_CTRL2_ATTACK(x)          (x << DIALOG7212_ALC_CTRL2_RELEASE_SHIFT)

/* DIALOG7212_ALC_CTRL3                          0x9B */
#define DIALOG7212_ALC_CTRL3_INTEG_RELEASE_MASK		(0xC0)
#define DIALOG7212_ALC_CTRL3_INTEG_RELEASE_SHIFT    (6)
#define DIALOG7212_ALC_CTRL3_INTEG_RELEASE_1DIV4    (0 << DIALOG7212_ALC_CTRL3_INTEG_RELEASE_SHIFT)
#define DIALOG7212_ALC_CTRL3_INTEG_RELEASE_1DIV16   (1 << DIALOG7212_ALC_CTRL3_INTEG_RELEASE_SHIFT)
#define DIALOG7212_ALC_CTRL3_INTEG_RELEASE_1DIV256  (2 << DIALOG7212_ALC_CTRL3_INTEG_RELEASE_SHIFT)
#define DIALOG7212_ALC_CTRL3_INTEG_ATTACK_MASK		(0x30)
#define DIALOG7212_ALC_CTRL3_INTEG_ATTACK_SHIFT     (4)
#define DIALOG7212_ALC_CTRL3_INTEG_ATTACK_1DIV4     (0 << DIALOG7212_ALC_CTRL3_INTEG_ATTACK_SHIFT)
#define DIALOG7212_ALC_CTRL3_INTEG_ATTACK_1DIV16    (1 << DIALOG7212_ALC_CTRL3_INTEG_ATTACK_SHIFT)
#define DIALOG7212_ALC_CTRL3_INTEG_ATTACK_1DIV256   (2 << DIALOG7212_ALC_CTRL3_INTEG_ATTACK_SHIFT)
#define DIALOG7212_ALC_CTRL3_HOLD_MASK  	     	(0x0F)
#define DIALOG7212_ALC_CTRL3_HOLD_SHIFT 	     	(0)
#define DIALOG7212_ALC_CTRL3_HOLD(x)    	     	(x << DIALOG7212_ALC_CTRL3_HOLD_SHIFT)

/* DIALOG7212_ALC_NOISE                          0x9C */
#define DIALOG7212_ALC_NOISE_MASK  	     (0x3F)
#define DIALOG7212_ALC_NOISE_SHIFT 	     (0)
#define DIALOG7212_ALC_NOISE_VAL(x)    	 (x << DIALOG7212_ALC_NOISE_SHIFT)

/* DIALOG7212_ALC_TARGET_MIN                     0x9D */
#define DIALOG7212_ALC_TARGET_MIN_THRESHOLD_MIN_MASK  	     (0x3F)
#define DIALOG7212_ALC_TARGET_MIN_THRESHOLD_MIN_SHIFT 	     (0)
#define DIALOG7212_ALC_TARGET_MIN_THRESHOLD_MIN(x)    	     (x << DIALOG7212_ALC_TARGET_MIN_THRESHOLD_MIN_SHIFT)

/* DIALOG7212_ALC_TARGET_MAX                     0x9E */
#define DIALOG7212_ALC_TARGET_MAX_THRESHOLD_MAX_MASK  	     (0x3F)
#define DIALOG7212_ALC_TARGET_MAX_THRESHOLD_MAX_SHIFT 	     (0)
#define DIALOG7212_ALC_TARGET_MAX_THRESHOLD_MAX(x)    	     (x << DIALOG7212_ALC_TARGET_MAX_THRESHOLD_MIN_SHIFT)

/* DIALOG7212_ALC_GAIN_LIMITS                    0x9F */
#define DIALOG7212_ALC_GAIN_LIMITS_GAIN_MAX_MASK		(0xF0)
#define DIALOG7212_ALC_GAIN_LIMITS_GAIN_MAX_SHIFT      	(4)
#define DIALOG7212_ALC_GAIN_LIMITS_GAIN_MAX(x)         	(x << DIALOG7212_ALC_GAIN_LIMITS_GAIN_MAX_SHIFT)
#define DIALOG7212_ALC_GAIN_LIMITS_ATTEN_MAX_MASK		(0x0F)
#define DIALOG7212_ALC_GAIN_LIMITS_ATTEN_MAX_SHIFT      (0)
#define DIALOG7212_ALC_GAIN_LIMITS_ATTEN_MAX(x)         (x << DIALOG7212_ALC_GAIN_LIMITS_ATTEN_MAX_SHIFT)

/* DIALOG7212_ALC_ANA_GAIN_LIMITS                0xA0 */
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_MASK		    (0x70)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT      	(4)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_0DB         	(1 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_6DB         	(2 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_12DB         (3 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_18DB         (4 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_24DB         (5 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_30DB         (6 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_36DB         (7 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MAX_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_MASK		    (0x07)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT      	(0)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_0DB         	(1 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_6DB         	(2 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_12DB         (3 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_18DB         (4 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_24DB         (5 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_30DB         (6 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)
#define DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_36DB         (7 << DIALOG7212_ALC_ANA_GAIN_LIMITS_MIN_SHIFT)

/* DIALOG7212_ALC_ANTICLIP_CTRL                  0xA1 */
#define DIALOG7212_ALC_ANTICLIP_CTRL_EN_MASK     (1 << 7)

/* DIALOG7212_ALC_ANTICLIP_LEVEL                 0xA2 */
#define DIALOG7212_ALC_ANTICLIP_LEVEL_MASK  	     (0x7F)
#define DIALOG7212_ALC_ANTICLIP_LEVEL_SHIFT 	     (0)
#define DIALOG7212_ALC_ANTICLIP_LEVEL_VAL(x)    	 (x << DIALOG7212_ALC_ANTICLIP_LEVEL_SHIFT)

/* DIALOG7212_DAC_NG_SETUP_TIME                  0xAF */
#define DIALOG7212_DAC_NG_SETUP_TIME_RAMPDN_RATE_MASK       (1 << 3)
#define DIALOG7212_DAC_NG_SETUP_TIME_RAMPUP_RATE_MASK       (1 << 2)
#define DIALOG7212_DAC_NG_SETUP_TIME_MASK		    		(0x03)
#define DIALOG7212_DAC_NG_SETUP_TIME_SHIFT      			(0)
#define DIALOG7212_DAC_NG_SETUP_TIME_256         			(1 << DIALOG7212_DAC_NG_SETUP_TIME_SHIFT)
#define DIALOG7212_DAC_NG_SETUP_TIME_512         			(2 << DIALOG7212_DAC_NG_SETUP_TIME_SHIFT)
#define DIALOG7212_DAC_NG_SETUP_TIME_1024         			(3 << DIALOG7212_DAC_NG_SETUP_TIME_SHIFT)
#define DIALOG7212_DAC_NG_SETUP_TIME_2048         			(4 << DIALOG7212_DAC_NG_SETUP_TIME_SHIFT)

/* DIALOG7212_DAC_NG_OFF_THRESH                  0xB0 */
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_MASK  	     (0x07)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT 	     (0)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N90DB    	 (0 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N84DB    	 (1 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N78DB    	 (2 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N72DB    	 (3 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N66DB    	 (4 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N60DB    	 (5 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N54DB    	 (6 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_OFF_THRESHOLD_N48DB    	 (7 << DIALOG7212_DAC_NG_OFF_THRESHOLD_SHIFT)

/* DIALOG7212_DAC_NG_ON_THRESH                   0xB1 */
#define DIALOG7212_DAC_NG_ON_THRESHOLD_MASK  	     (0x07)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT 	     (0)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N90DB    	 (0 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N84DB    	 (1 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N78DB    	 (2 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N72DB    	 (3 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N66DB    	 (4 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N60DB    	 (5 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N54DB    	 (6 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)
#define DIALOG7212_DAC_NG_ON_THRESHOLD_N48DB    	 (7 << DIALOG7212_DAC_NG_ON_THRESHOLD_SHIFT)

/* DIALOG7212_DAC_NG_CTRL                        0xB2 */
#define DIALOG7212_DAC_NG_CTRL_EN_MASK     (1 << 7)

/*************Tone Generation & Beep Registers************/
/* DIALOG7212_TONE_GEN_CFG1                      0xB4 */
#define DIALOG7212_TONE_GEN_CFG1_START_STOPN_MASK     (1 << 7)
#define DIALOG7212_TONE_GEN_CFG1_DMTF_EN_MASK         (1 << 4)
#define DIALOG7212_TONE_GEN_CFG1_DMTF_REG_MASK  	  (0x0F)
#define DIALOG7212_TONE_GEN_CFG1_DMTF_REG_SHIFT 	  (0)
#define DIALOG7212_TONE_GEN_CFG1_DMTF_REG(x)    	  (x << DIALOG7212_TONE_GEN_CFG1_DMTF_REG_SHIFT)

/* DIALOG7212_TONE_GEN_CFG2                      0xB5 */
#define DIALOG7212_TONE_GEN_CFG2_GAIN_MASK  	  	(0xF0)
#define DIALOG7212_TONE_GEN_CFG2_GAIN_SHIFT 	  	(4)
#define DIALOG7212_TONE_GEN_CFG2_GAIN(x)    	  	(x << DIALOG7212_TONE_GEN_CFG2_GAIN_SHIFT)
#define DIALOG7212_TONE_GEN_CFG2_SWG_SEL_MASK  	  	(0x03)
#define DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SUM__BOTH  (0 << DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SHIFT)
#define DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SWG1_ONLY  (1 << DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SHIFT)
#define DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SWG2_ONLY  (2 << DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SHIFT)
#define DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SUM_BOTH   (3 << DIALOG7212_TONE_GEN_CFG2_SWG_SEL_SHIFT)

/* DIALOG7212_TONE_GEN_CYCLES                    0xB6 */
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_MASK  	  	(0x07)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_1    	  	(0 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_2    	  	(1 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_4    	  	(2 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_8    	  	(3 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_16    	  	(4 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_32    	  	(5 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)
#define DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_INFINITE    	(6 << DIALOG7212_TONE_GEN_CYCLES_BEEP_CYCLES_SHIFT)

/* DIALOG7212_TONE_GEN_FREQ1_L                   0xB7 */
#define DIALOG7212_TONE_GEN_FREQ1_L_MASK  	  	(0xFF)
#define DIALOG7212_TONE_GEN_FREQ1_L_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_FREQ1_L_VAL(x)    	(x << DIALOG7212_TONE_GEN_FREQ1_L_SHIFT)

/* DIALOG7212_TONE_GEN_FREQ1_U                   0xB8 */
#define DIALOG7212_TONE_GEN_FREQ1_U_MASK  	  	(0xFF)
#define DIALOG7212_TONE_GEN_FREQ1_U_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_FREQ1_U_VAL(x)    	(x << DIALOG7212_TONE_GEN_FREQ1_U_SHIFT)

/* DIALOG7212_TONE_GEN_FREQ2_L                   0xB9 */
#define DIALOG7212_TONE_GEN_FREQ2_L_MASK  	  	(0xFF)
#define DIALOG7212_TONE_GEN_FREQ2_L_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_FREQ2_L_VAL(x)    	(x << DIALOG7212_TONE_GEN_FREQ2_L_SHIFT)

/* DIALOG7212_TONE_GEN_FREQ2_U                   0xBA */
#define DIALOG7212_TONE_GEN_FREQ2_U_MASK  	  	(0xFF)
#define DIALOG7212_TONE_GEN_FREQ2_U_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_FREQ2_U_VAL(x)    	(x << DIALOG7212_TONE_GEN_FREQ2_U_SHIFT)

/* DIALOG7212_TONE_GEN_ON_PER                    0xBB */
#define DIALOG7212_TONE_GEN_ON_PER_BEEP_ON_PER_MASK  	  	(0x3F)
#define DIALOG7212_TONE_GEN_ON_PER_BEEP_ON_PER_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_ON_PER_BEEP_ON_PER(x)    	  	(x << DIALOG7212_TONE_GEN_ON_PER_BEEP_ON_PER_SHIFT)

/* DIALOG7212_TONE_GEN_OFF_PER                   0xBC */
#define DIALOG7212_TONE_GEN_OFF_PER_BEEP_OFF_PER_MASK  	  	(0x3F)
#define DIALOG7212_TONE_GEN_OFF_PER_BEEP_OFF_PER_SHIFT 	  	(0)
#define DIALOG7212_TONE_GEN_OFF_PER_BEEP_OFF_PER(x)    	  	(x << DIALOG7212_TONE_GEN_OFF_PER_BEEP_OFF_PER_SHIFT)

/*************System Controller Registers(2)*************/
/* DIALOG7212_SYSTEM_STATUS                      0xE0 */
#define DIALOG7212_SYSTEM_STATUS_SC2_BUSY_MASK      (1 << 1)
#define DIALOG7212_SYSTEM_STATUS_SC1_BUSY_MASK      (1 << 0)

/* DIALOG7212_SYSTEM_ACTIVE                      0xFD */
#define DIALOG7212_SYSTEM_ACTIVE_MASK      (1 << 0)

/*************PLL Control Macros***********************************/


#define DA7212_44_1KHZ_NEED_PLL                              	   (DIALOG7212_SYS_MCLK % 11289600)
#define DA7212_8KHZ_16KHZ_32KHZ_48KHZ_96KHZ_NEED_PLL               (DIALOG7212_SYS_MCLK % 12288000)

/***********************Define INDIV Value*************************/
#if (DIALOG7212_SYS_MCLK > 2000000 && DIALOG7212_SYS_MCLK < 10000000)
	#define DIALOG7212_INPUT_DIVIDER		(1)
	#define DIALOG7212_PLL_INDIV			DIALOG7212_PLL_INDIV_2_10MHZ			//Defines the PLL Indiv. according the input MCLK in slave mode
#elif (DIALOG7212_SYS_MCLK > 10000000 && DIALOG7212_SYS_MCLK < 20000000)
	#define DIALOG7212_INPUT_DIVIDER		(2)
	#define DIALOG7212_PLL_INDIV			DIALOG7212_PLL_INDIV_10_20MHZ
#elif (DIALOG7212_SYS_MCLK > 20000000 && DIALOG7212_SYS_MCLK < 40000000)
	#define DIALOG7212_INPUT_DIVIDER		(4)
	#define DIALOG7212_PLL_INDIV			DIALOG7212_PLL_INDIV_20_40MHZ
#else	/* Between 40 and 54 */
	#define DIALOG7212_INPUT_DIVIDER		(8)
	#define DIALOG7212_PLL_INDIV			DIALOG7212_PLL_INDIV_40_80MHZ
#endif

/************Calculate Reference Voltage Controller Oscillator(VCO)***********/
/****************** 8 times the required system clock frequency***************/
#define DIALOG7212_VCO_OUTPUT_FREQ_8K			(196608000)  //(12288000*8*Stereo)
#define DIALOG7212_VCO_OUTPUT_FREQ_16K			(196608000)  //(12288000*8*Stereo)
#define DIALOG7212_VCO_OUTPUT_FREQ_32K			(196608000)  //(12288000*8*Stereo)
#define DIALOG7212_VCO_OUTPUT_FREQ_44_1K 		(180633600)	 //(11289600*8*Stereo)
#define DIALOG7212_VCO_OUTPUT_FREQ_48K			(196608000)  //(12288000*8*Stereo)
#define DIALOG7212_VCO_OUTPUT_FREQ_96K			(196608000)  //(12288000*8*Stereo)

/*****************Calculate Reference PLL Feedback Divider********************/
/**Feedback Divider(F) = VCO output frequency * Input Divider(PLL_INDIV)/Reference Input Clock**/

/**Sample Rate 8KHz*/
/*Get Feedback Divider and shift result to avoid losing fractional part */
#define DIALOG7212_PLL_FEEDBACK_DIVIDER_8K                                                        \
    ((((uint64_t)(DIALOG7212_VCO_OUTPUT_FREQ_8K * DIALOG7212_INPUT_DIVIDER)) << ((uint64_t)13)) / \
     (uint64_t)(DIALOG7212_SYS_MCLK))
/* Get integer part of feedback divider*/
#define DIALOG7212_FB_DIV_INTEGER_8K	          ((DIALOG7212_VCO_OUTPUT_FREQ_8K * DIALOG7212_INPUT_DIVIDER) / DIALOG7212_SYS_MCLK)
/* Get Fractional part of feedback divider*/
#define DIALOG7212_FB_DIV_FRAC_8K                (DIALOG7212_PLL_FEEDBACK_DIVIDER_8K - (DIALOG7212_FB_DIV_INTEGER_8K << 13))
/* Divide Fractional part in two parts*/
#define DIALOG7212_FB_DIV_FRAC_TOP_8K            (DIALOG7212_FB_DIV_FRAC_8K  >> 8)
#define DIALOG7212_FB_DIV_FRAC_BOT_8K            (DIALOG7212_FB_DIV_FRAC_8K & 0x00FF)

/**Sample Rate 16KHz*/
/*Get Feedback Divider and shift result to avoid losing fractional part */
#define DIALOG7212_PLL_FEEDBACK_DIVIDER_16K                                                        \
    ((((uint64_t)(DIALOG7212_VCO_OUTPUT_FREQ_16K * DIALOG7212_INPUT_DIVIDER)) << ((uint64_t)13)) / \
     (uint64_t)(DIALOG7212_SYS_MCLK))
/* Get integer part of feedback divider*/
#define DIALOG7212_FB_DIV_INTEGER_16K \
    ((DIALOG7212_VCO_OUTPUT_FREQ_16K * DIALOG7212_INPUT_DIVIDER) / DIALOG7212_SYS_MCLK)
/* Get Fractional part of feedback divider*/
#define DIALOG7212_FB_DIV_FRAC_16K                (DIALOG7212_PLL_FEEDBACK_DIVIDER_16K - (DIALOG7212_FB_DIV_INTEGER_16K << 13))
/* Divide Fractional part in two parts*/
#define DIALOG7212_FB_DIV_FRAC_TOP_16K            (DIALOG7212_FB_DIV_FRAC_16K  >> 8)
#define DIALOG7212_FB_DIV_FRAC_BOT_16K            (DIALOG7212_FB_DIV_FRAC_16K & 0x00FF)

/**Sample Rate 32KHz*/
/*Get Feedback Divider and shift result to avoid losing fractional part */
#define DIALOG7212_PLL_FEEDBACK_DIVIDER_32K                                                        \
    ((((uint64_t)(DIALOG7212_VCO_OUTPUT_FREQ_32K * DIALOG7212_INPUT_DIVIDER)) << ((uint64_t)13)) / \
     (uint64_t)(DIALOG7212_SYS_MCLK))
/* Get integer part of feedback divider*/
#define DIALOG7212_FB_DIV_INTEGER_32K \
    ((DIALOG7212_VCO_OUTPUT_FREQ_32K * DIALOG7212_INPUT_DIVIDER) / DIALOG7212_SYS_MCLK)
/* Get Fractional part of feedback divider*/
#define DIALOG7212_FB_DIV_FRAC_32K                (DIALOG7212_PLL_FEEDBACK_DIVIDER_32K - (DIALOG7212_FB_DIV_INTEGER_32K << 13))
/* Divide Fractional part in two parts*/
#define DIALOG7212_FB_DIV_FRAC_TOP_32K            (DIALOG7212_FB_DIV_FRAC_32K  >> 8)
#define DIALOG7212_FB_DIV_FRAC_BOT_32K            (DIALOG7212_FB_DIV_FRAC_32K & 0x00FF)

/**Sample Rate 44.1KHz*/
/*Get Feedback Divider and shift result to avoid losing fractional part */
#define DIALOG7212_PLL_FEEDBACK_DIVIDER_44_1K                                                        \
    ((((uint64_t)(DIALOG7212_VCO_OUTPUT_FREQ_44_1K * DIALOG7212_INPUT_DIVIDER)) << ((uint64_t)13)) / \
     (uint64_t)(DIALOG7212_SYS_MCLK))
/* Get integer part of feedback divider*/
#define DIALOG7212_FB_DIV_INTEGER_44_1K \
    ((DIALOG7212_VCO_OUTPUT_FREQ_44_1K * DIALOG7212_INPUT_DIVIDER) / DIALOG7212_SYS_MCLK)
/* Get Fractional part of feedback divider*/
#define DIALOG7212_FB_DIV_FRAC_44_1K              (DIALOG7212_PLL_FEEDBACK_DIVIDER_44_1K - (DIALOG7212_FB_DIV_INTEGER_44_1K << 13))
/* Divide Fractional part in two parts*/
#define DIALOG7212_FB_DIV_FRAC_TOP_44_1K          (DIALOG7212_FB_DIV_FRAC_44_1K  >> 8)
#define DIALOG7212_FB_DIV_FRAC_BOT_44_1K          (DIALOG7212_FB_DIV_FRAC_44_1K & 0x00FF)

/**Sample Rate 48KHz*/
/*Get Feedback Divider and shift result to avoid losing fractional part */
#define DIALOG7212_PLL_FEEDBACK_DIVIDER_48K                                                        \
    ((((uint64_t)(DIALOG7212_VCO_OUTPUT_FREQ_48K * DIALOG7212_INPUT_DIVIDER)) << ((uint64_t)13)) / \
     (uint64_t)(DIALOG7212_SYS_MCLK))
/* Get integer part of feedback divider*/
#define DIALOG7212_FB_DIV_INTEGER_48K \
    ((DIALOG7212_VCO_OUTPUT_FREQ_48K * DIALOG7212_INPUT_DIVIDER) / DIALOG7212_SYS_MCLK)
/* Get Fractional part of feedback divider*/
#define DIALOG7212_FB_DIV_FRAC_48K                (DIALOG7212_PLL_FEEDBACK_DIVIDER_48K - (DIALOG7212_FB_DIV_INTEGER_48K << 13))
/* Divide Fractional part in two parts*/
#define DIALOG7212_FB_DIV_FRAC_TOP_48K            (DIALOG7212_FB_DIV_FRAC_48K >> 8)
#define DIALOG7212_FB_DIV_FRAC_BOT_48K            (DIALOG7212_FB_DIV_FRAC_48K & 0x00FF)

/**Sample Rate 96KHz*/
/*Get Feedback Divider and shift result to avoid losing fractional part */
#define DIALOG7212_PLL_FEEDBACK_DIVIDER_96K                                                        \
    ((((uint64_t)(DIALOG7212_VCO_OUTPUT_FREQ_96K * DIALOG7212_INPUT_DIVIDER)) << ((uint64_t)13)) / \
     (uint64_t)(DIALOG7212_SYS_MCLK))
/* Get integer part of feedback divider*/
#define DIALOG7212_FB_DIV_INTEGER_96K \
    ((DIALOG7212_VCO_OUTPUT_FREQ_96K * DIALOG7212_INPUT_DIVIDER) / DIALOG7212_SYS_MCLK)
/* Get Fractional part of feedback divider*/
#define DIALOG7212_FB_DIV_FRAC_96K                (DIALOG7212_PLL_FEEDBACK_DIVIDER_96K - (DIALOG7212_FB_DIV_INTEGER_96K << 13))
/* Divide Fractional part in two parts*/
#define DIALOG7212_FB_DIV_FRAC_TOP_96K            (DIALOG7212_FB_DIV_FRAC_96K  >> 8)
#define DIALOG7212_FB_DIV_FRAC_BOT_96K            (DIALOG7212_FB_DIV_FRAC_96K & 0x00FF)


///////////////////////////////////////////////////////////////////////////////////////////////////
//                                       Typedef Section
///////////////////////////////////////////////////////////////////////////////////////////////////

typedef enum
{
    DA7212_CONTROL_STATE_IDLE = 0,
    DA7212_CONTROL_STATE_WAIT_COMM,
    DA7212_WRITE_BLOCK_STATE,
    DA7212_CONTROL_STATE_WAIT_TIMEOUT,
    DA7212_CONTROL_MAX_STATES
} eDA7212ControlStates;

typedef struct _da7212_register_value
{
    uint8_t addr;
    uint8_t value;
} da7212_register_value_t;

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                  Function Prototypes Section
///////////////////////////////////////////////////////////////////////////////////////////////////
static void DA7212_IdleState(void);

static void DA7212_WaitCommState(void);

static void DA7212_WriteBlockState(void);

static void DA7212_TimeoutState(void);

static void DA7212_SWTimerCallback(void);

static void (*const DA7212_StateMachine[])(void) = {
    DA7212_IdleState, DA7212_WaitCommState, DA7212_WriteBlockState, DA7212_TimeoutState,
};

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Static Constants Section
///////////////////////////////////////////////////////////////////////////////////////////////////

static const da7212_register_value_t kInputRegisterSequence[DA7212_Input_MAX][17] = {
    // DA7212_Input_AUX
    {
        {DIALOG7212_MIXIN_L_SELECT, 0x01},
        {DIALOG7212_MIXIN_R_SELECT, 0x01},
        {DIALOG7212_CP_CTRL, 0xFD},
        {DIALOG7212_AUX_L_CTRL, 0xB4},
        {DIALOG7212_AUX_R_CTRL, 0xB0},
        {DIALOG7212_MIC_1_CTRL, 0x04},
        {DIALOG7212_MIC_2_CTRL, 0x04},
        {DIALOG7212_MIXIN_L_CTRL, 0x88},
        {DIALOG7212_MIXIN_R_CTRL, 0x88},
        {DIALOG7212_ADC_L_CTRL, 0xA0},
        {DIALOG7212_GAIN_RAMP_CTRL, 0x02},
        {DIALOG7212_PC_COUNT, 0x02},
        {DIALOG7212_CP_DELAY, 0x95},
    },
    // DA7212_Input_MIC1_Dig
    {
        {DIALOG7212_MICBIAS_CTRL, 0xA9},
        {DIALOG7212_CP_CTRL, 0xF1},
        {DIALOG7212_MIXIN_L_SELECT, 0x80},
        {DIALOG7212_MIXIN_R_SELECT, 0x80},
        {DIALOG7212_SYSTEM_MODES_INPUT, 0xFE},
        {DIALOG7212_SYSTEM_MODES_OUTPUT, 0xF7},
        {DIALOG7212_MIC_2_GAIN, 0x04},
        {DIALOG7212_MIC_2_CTRL, 0x84},
        {DIALOG7212_MIC_1_GAIN, 0x01},
        {DIALOG7212_MIC_1_CTRL, 0x80},
    },
    // DA7212_Input_MIC1_An
    {
        {DIALOG7212_MIXIN_L_SELECT, 0x02},
        {DIALOG7212_MIXIN_R_SELECT, 0x04},
        {DIALOG7212_MIC_1_GAIN, 0x03},
        {DIALOG7212_CP_CTRL, 0xFD},
        {DIALOG7212_MIXOUT_L_SELECT, 0x08},
        {DIALOG7212_MIXOUT_R_SELECT, 0x08},
        {DIALOG7212_AUX_R_CTRL, 0x40},
        {DIALOG7212_MICBIAS_CTRL, 0x19},
        {DIALOG7212_MIC_1_CTRL, 0x84},
        {DIALOG7212_MIC_2_CTRL, 0x04},
        {DIALOG7212_MIXIN_L_CTRL, 0x88},
        {DIALOG7212_MIXIN_R_CTRL, 0x88},
        {DIALOG7212_ADC_L_CTRL, 0xA0},
        {DIALOG7212_GAIN_RAMP_CTRL, 0x02},
        {DIALOG7212_PC_COUNT, 0x02},
        {DIALOG7212_CP_DELAY, 0x95},
    },
    // DA7212_Input_MIC2
    {
        {DIALOG7212_MIXIN_L_SELECT, 0x04},
        {DIALOG7212_MIXIN_R_SELECT, 0x02},
        {DIALOG7212_MIC_2_GAIN, 0x04},
        {DIALOG7212_CP_CTRL, 0xFD},
        {DIALOG7212_AUX_R_CTRL, 0x40},
        {DIALOG7212_MICBIAS_CTRL, 0x91},
        {DIALOG7212_MIC_1_CTRL, 0x08},
        {DIALOG7212_MIC_2_CTRL, 0x84},
        {DIALOG7212_MIXIN_L_CTRL, 0x88},
        {DIALOG7212_MIXIN_R_CTRL, 0x88},
        {DIALOG7212_ADC_L_CTRL, 0xA0},
        {DIALOG7212_GAIN_RAMP_CTRL, 0x02},
        {DIALOG7212_PC_COUNT, 0x02},
        {DIALOG7212_CP_DELAY, 0x95},
    }};

static const da7212_register_value_t kOutputRegisterSequence[DA7212_Output_MAX][4] = {
    // DA7212_Output_HP
    {
        {DIALOG7212_CP_CTRL, 0xFD},
        {DIALOG7212_LINE_CTRL, 0X40},
        {DIALOG7212_HP_L_CTRL, (DIALOG7212_HP_L_CTRL_AMP_EN_MASK | DIALOG7212_HP_L_CTRL_AMP_RAMP_EN_MASK |
                                DIALOG7212_HP_L_CTRL_AMP_ZC_EN_MASK | DIALOG7212_HP_L_CTRL_AMP_OE_MASK)},
        {DIALOG7212_HP_R_CTRL, (DIALOG7212_HP_R_CTRL_AMP_EN_MASK | DIALOG7212_HP_R_CTRL_AMP_RAMP_EN_MASK |
                                DIALOG7212_HP_R_CTRL_AMP_ZC_EN_MASK | DIALOG7212_HP_R_CTRL_AMP_OE_MASK)},
    },
    // DA7212_Output_SP
    {
        {DIALOG7212_CP_CTRL, 0x3D},
        {DIALOG7212_HP_L_CTRL, 0x40},
        {DIALOG7212_HP_R_CTRL, 0x40},
        {DIALOG7212_LINE_CTRL, 0xA8},
    }};

static const da7212_register_value_t kInitRegisterSequence[DA7212_INIT_SIZE] = {
    {
        DIALOG7212_STATUS1, CLEAR_REGISTER,
    },
    {
        DIALOG7212_PLL_STATUS, (DIALOG7212_PLL_STATUS_MCLK_STATUS_MASK | DIALOG7212_PLL_STATUS_LOCK_MASK),
    },
    {
        DIALOG7212_DAC_L_GAIN_STATUS, CLEAR_REGISTER,
    },
    {
        DIALOG7212_DAC_R_GAIN_STATUS, CLEAR_REGISTER,
    },
    {
        DIALOG7212_HP_L_GAIN_STATUS, CLEAR_REGISTER,
    },
    {
        DIALOG7212_HP_R_GAIN_STATUS, CLEAR_REGISTER,
    },
    {
        DIALOG7212_LINE_GAIN_STATUS, CLEAR_REGISTER,
    },
    {
        DIALOG7212_SR, DIALOG7212_SR_48KHZ,
    },
    {
        DIALOG7212_REFERENCES, DIALOG7212_REFERENCES_BIAS_EN_MASK,
    },
    {
        DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_48K,
    },
    {
        DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_48K,
    },
    {
        DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_48K,
    },
    {
        DIALOG7212_PLL_CTRL, (DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV),
    },
    {
        DIALOG7212_DAI_CLK_MODE, (DIALOG7212_DAI_CLK_EN_MASK | DIALOG7212_DAI_BCLKS_PER_WCLK_BCLK64),
    },
    {
        DIALOG7212_DAI_CTRL, (DIALOG7212_DAI_EN_MASK | DIALOG7212_DAI_OE__MASK | DIALOG7212_DAI_WORD_LENGTH_16B),
    },
    {
        DIALOG7212_DIG_ROUTING_DAC, (DIALOG7212_DIG_ROUTING_DAC_R_RSC_DAC_R | DIALOG7212_DIG_ROUTING_DAC_L_RSC_DAC_L),
    },
    {
        DIALOG7212_CP_CTRL, (DIALOG7212_CP_CTRL_EN_MASK | DIALOG7212_CP_CTRL_SMALL_SWIT_CH_FREQ_EN_MASK |
                             DIALOG7212_CP_CTRL_MCHANGE_OUTPUT | DIALOG7212_CP_CTRL_MOD_CPVDD_1 |
                             DIALOG7212_CP_CTRL_ANALOG_VLL_LV_BOOSTS_CP),
    },
    {
        DIALOG7212_MIXOUT_L_SELECT, (DIALOG7212_MIXOUT_L_SELECT_DAC_L_MASK),
    },
    {
        DIALOG7212_MIXOUT_R_SELECT, (DIALOG7212_MIXOUT_R_SELECT_DAC_R_MASK),
    },
    {
        DIALOG7212_DAC_L_CTRL, (DIALOG7212_DAC_L_CTRL_ADC_EN_MASK | DIALOG7212_DAC_L_CTRL_ADC_RAMP_EN_MASK),
    },
    {
        DIALOG7212_DAC_R_CTRL, (DIALOG7212_DAC_R_CTRL_ADC_EN_MASK | DIALOG7212_DAC_R_CTRL_ADC_RAMP_EN_MASK),
    },
    {
        DIALOG7212_HP_L_CTRL, (DIALOG7212_HP_L_CTRL_AMP_EN_MASK | DIALOG7212_HP_L_CTRL_AMP_RAMP_EN_MASK |
                               DIALOG7212_HP_L_CTRL_AMP_ZC_EN_MASK | DIALOG7212_HP_L_CTRL_AMP_OE_MASK),
    },
    {
        DIALOG7212_HP_R_CTRL, (DIALOG7212_HP_R_CTRL_AMP_EN_MASK | DIALOG7212_HP_R_CTRL_AMP_RAMP_EN_MASK |
                               DIALOG7212_HP_R_CTRL_AMP_ZC_EN_MASK | DIALOG7212_HP_R_CTRL_AMP_OE_MASK),
    },
    {
        DIALOG7212_MIXOUT_L_CTRL,
        (DIALOG7212_MIXOUT_L_CTRL_AMP_EN_MASK | DIALOG7212_MIXOUT_L_CTRL_AMP_SOFT_MIX_EN_MASK |
         DIALOG7212_MIXOUT_L_CTRL_AMP_MIX_EN_MASK),
    },
    {
        DIALOG7212_MIXOUT_R_CTRL,
        (DIALOG7212_MIXOUT_R_CTRL_AMP_EN_MASK | DIALOG7212_MIXOUT_R_CTRL_AMP_SOFT_MIX_EN_MASK |
         DIALOG7212_MIXOUT_R_CTRL_AMP_MIX_EN_MASK),
    },
    {
        DIALOG7212_CP_VOL_THRESHOLD1, (DIALOG7212_CP_VOL_THRESHOLD1_VDD2(0x32)),
    },
    {
        DIALOG7212_SYSTEM_STATUS, CLEAR_REGISTER,
    },
    {
        DIALOG7212_DAC_L_GAIN, DA7212_DAC_GAIN_0DB,
    },
    {
        DIALOG7212_DAC_R_GAIN, DA7212_DAC_GAIN_0DB,
    },
    {
        DIALOG7212_MIXIN_L_SELECT, DIALOG7212_MIXIN_L_SELECT_AUX_L_SEL_MASK,
    },
    {
        DIALOG7212_MIXIN_R_SELECT, DIALOG7212_MIXIN_R_SELECT_AUX_R_SEL_MASK,
    },
    {
        DIALOG7212_MIXIN_L_GAIN, DIALOG7212_MIXIN_L_AMP_GAIN(0x03),
    },
    {
        DIALOG7212_MIXIN_R_GAIN, DIALOG7212_MIXIN_R_AMP_GAIN(0x03),
    },
    {
        DIALOG7212_ADC_L_GAIN, DIALOG7212_ADC_L_DIGITAL_GAIN(0x6F),
    },
    {
        DIALOG7212_ADC_R_GAIN, DIALOG7212_ADC_R_DIGITAL_GAIN(0x6F),
    },
    {
        DIALOG7212_AUX_L_CTRL, DIALOG7212_AUX_L_CTRL_AMP_EN_MASK | DIALOG7212_AUX_L_CTRL_AMP_RAMP_EN_MASK |
                                   DIALOG7212_AUX_L_CTRL_AMP_ZC_EN_MASK,
    },
    {
        DIALOG7212_AUX_R_CTRL, DIALOG7212_AUX_R_CTRL_AMP_EN_MASK | DIALOG7212_AUX_R_CTRL_AMP_RAMP_EN_MASK |
                                   DIALOG7212_AUX_R_CTRL_AMP_ZC_EN_MASK,
    },
    {
        DIALOG7212_MIXIN_L_CTRL, DIALOG7212_MIXIN_L_CTRL_AMP_EN_MASK | DIALOG7212_MIXIN_L_CTRL_AMP_MIX_EN_MASK,
    },
    {
        DIALOG7212_MIXIN_R_CTRL, DIALOG7212_MIXIN_R_CTRL_AMP_EN_MASK | DIALOG7212_MIXIN_R_CTRL_AMP_MIX_EN_MASK,
    },
    {
        DIALOG7212_ADC_L_CTRL, DIALOG7212_ADC_L_CTRL_ADC_EN_MASK | DIALOG7212_ADC_L_CTRL_ADC_RAMP_EN_MASK,
    },
    {
        DIALOG7212_ADC_R_CTRL, DIALOG7212_ADC_R_CTRL_ADC_EN_MASK | DIALOG7212_ADC_R_CTRL_ADC_RAMP_EN_MASK,
    },
};

static const uint8_t kVolumeControlValues[DA7212_MAX_VOLUME_STEPS] = {
    DA7212_DAC_GAIN_MUTE,  DA7212_DAC_GAIN_M72DB, DA7212_DAC_GAIN_M60DB, DA7212_DAC_GAIN_M54DB, DA7212_DAC_GAIN_M48DB,
    DA7212_DAC_GAIN_M42DB, DA7212_DAC_GAIN_M36DB, DA7212_DAC_GAIN_M30DB, DA7212_DAC_GAIN_M24DB, DA7212_DAC_GAIN_M18DB,
    DA7212_DAC_GAIN_M12DB, DA7212_DAC_GAIN_M6DB,  DA7212_DAC_GAIN_0DB,   DA7213_DAC_GAIN_6DB,   DA7213_DAC_GAIN_12DB};

static const da7212_register_value_t kChangeFreqValues[DA7212_SYS_FS_MAX][DA7212_CHANGE_FREQ_SIZE] = {
    {
#if DA7212_8KHZ_16KHZ_32KHZ_48KHZ_96KHZ_NEED_PLL
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_8KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_8K,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_8K,
        },
        {DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_8K},
#else
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_8KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, CLEAR_REGISTER,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, CLEAR_REGISTER,
        },
        {DIALOG7212_PLL_INTEGER, CLEAR_REGISTER},
#endif
    },
    {
#if DA7212_8KHZ_16KHZ_32KHZ_48KHZ_96KHZ_NEED_PLL
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_16KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_16K,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_16K,
        },
        {DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_16K},
#else
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_16KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, CLEAR_REGISTER,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, CLEAR_REGISTER,
        },
        {DIALOG7212_PLL_INTEGER, CLEAR_REGISTER},
#endif
    },
    {
#if DA7212_8KHZ_16KHZ_32KHZ_48KHZ_96KHZ_NEED_PLL
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_32KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_32K,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_32K,
        },
        {DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_32K},
#else
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_32KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, CLEAR_REGISTER,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, CLEAR_REGISTER,
        },
        {DIALOG7212_PLL_INTEGER, CLEAR_REGISTER},
#endif

    },
    {
#if DA7212_44_1KHZ_NEED_PLL
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_44_1KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_44_1K,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_44_1K,
        },
        {DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_44_1K},
#else
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_44_1KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, CLEAR_REGISTER,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, CLEAR_REGISTER,
        },
        {DIALOG7212_PLL_INTEGER, CLEAR_REGISTER},
#endif
    },
    {
#if DA7212_8KHZ_16KHZ_32KHZ_48KHZ_96KHZ_NEED_PLL
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_48KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_48K,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_48K,
        },
        {DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_48K},
#else
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_48KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, CLEAR_REGISTER,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, CLEAR_REGISTER,
        },
        {DIALOG7212_PLL_INTEGER, CLEAR_REGISTER},
#endif

    },
    {
#if DA7212_8KHZ_16KHZ_32KHZ_48KHZ_96KHZ_NEED_PLL
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_EN_MASK | DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_96KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, DIALOG7212_FB_DIV_FRAC_TOP_96K,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, DIALOG7212_FB_DIV_FRAC_BOT_96K,
        },
        {DIALOG7212_PLL_INTEGER, DIALOG7212_FB_DIV_INTEGER_96K},
#else
        {
            DIALOG7212_PLL_CTRL, DIALOG7212_PLL_INDIV,
        },
        {
            DIALOG7212_SR, DIALOG7212_SR_96KHZ,
        },
        {
            DIALOG7212_PLL_FRAC_TOP, CLEAR_REGISTER,
        },
        {
            DIALOG7212_PLL_FRAC_BOT, CLEAR_REGISTER,
        },
        {DIALOG7212_PLL_INTEGER, CLEAR_REGISTER},
#endif
    }

};

typedef struct
{
    uint8_t actualState;
    uint8_t prevState;
    uint8_t nextState;
    uint8_t errorState;
} state_machine_t;

#define OK (0)
#define ERROR (1)

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                   Static Variables Section
///////////////////////////////////////////////////////////////////////////////////////////////////

typedef struct _da7212_context
{
    state_machine_t States;
    volatile uint8_t DriverStatus;

    uint32_t startTime;
    uint8_t SysFs;

    uint8_t RegisterOffset;
    uint8_t RegistersToWrite;
    const da7212_register_value_t *WriteBlockRegister;
    da7212_register_value_t RegistersToChange[10];

    uint8_t DataOutBuffer[DA7212_CONTROL_BUFFER_SIZE];
    uint8_t *ReadData;
    I2C_Type *i2cBase;
    i2c_master_handle_t i2cHandle;
    i2c_master_transfer_t i2cTransfer;
    volatile bool i2cTransferCompleted;
    status_t i2cTransferStatus;
} da7212_context_t;

static da7212_context_t s_context;

///////////////////////////////////////////////////////////////////////////////////////////////////
//                                      Functions Section
///////////////////////////////////////////////////////////////////////////////////////////////////

uint32_t DA7212_GetStatus(void)
{
    return s_context.DriverStatus;
}

void DA7212_WriteRegister(uint8_t u8Register, uint8_t u8RegisterData)
{
    /* set the driver as busy and the next state to wait physical layer driver */
    DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK);

    /* Set the command buffer to send the data thru physical layer */
    s_context.DataOutBuffer[0] = u8RegisterData;

    s_context.i2cTransfer.flags = 0;
    s_context.i2cTransfer.slaveAddress = DA7212_ADDRESS;
    s_context.i2cTransfer.direction = kI2C_Write;
    s_context.i2cTransfer.subaddress = u8Register;
    s_context.i2cTransfer.subaddressSize = 1;
    s_context.i2cTransfer.data = s_context.DataOutBuffer;
    s_context.i2cTransfer.dataSize = 1;

    s_context.i2cTransferCompleted = false;

    //     printf("DA7212: write reg 0x%02x = 0x%02x\r\n", u8Register, u8RegisterData);
    while (I2C_MasterTransferNonBlocking(s_context.i2cBase, &s_context.i2cHandle, &s_context.i2cTransfer) ==
           kStatus_I2C_Busy)
    {
    }

    s_context.States.actualState = DA7212_CONTROL_STATE_WAIT_COMM;
}

void DA7212_ReadRegister(uint8_t u8Register, uint8_t *pu8RegisterData)
{
    /* Set the driver as busy and the next state logic */
    DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK); /* Set next state logic and write the register */

    /* Setup pointer to the RX buffer */
    s_context.ReadData = pu8RegisterData;

    /* Use physical layer */
    s_context.i2cTransfer.flags = 0;
    s_context.i2cTransfer.slaveAddress = DA7212_ADDRESS;
    s_context.i2cTransfer.direction = kI2C_Read;
    s_context.i2cTransfer.subaddress = u8Register;
    s_context.i2cTransfer.subaddressSize = 1;
    s_context.i2cTransfer.data = s_context.ReadData;
    s_context.i2cTransfer.dataSize = 1;

    s_context.i2cTransferCompleted = false;

    while (I2C_MasterTransferNonBlocking(s_context.i2cBase, &s_context.i2cHandle, &s_context.i2cTransfer) ==
           kStatus_I2C_Busy)
    {
    }

    s_context.States.actualState = DA7212_CONTROL_STATE_WAIT_COMM;
}

void DA7212_Driver(void)
{
    DA7212_StateMachine[s_context.States.actualState]();
}

void DA7212_I2CCompletionCallback(I2C_Type *base, i2c_master_handle_t *handle, status_t status, void *userData)
{
    //     printf("DA7212: reg write complete; status = %d\r\n", status);
    s_context.i2cTransferCompleted = true;
    s_context.i2cTransferStatus = status;
}

void DA7212_Run(void)
{
    while (DA7212_GetStatus() & DA7212_STATUS_BUSY_MASK)
    {
        DA7212_Driver();
    }
}

void DA7212_InitCodec(I2C_Type *base)
{
    s_context.startTime = 0;
    s_context.SysFs = DA7212_SYS_FS_48K;
    s_context.RegisterOffset = 0;
    s_context.RegistersToWrite = 0;
    s_context.i2cBase = NULL;
    s_context.i2cTransferCompleted = false;

    s_context.i2cBase = base;

    I2C_MasterTransferCreateHandle(s_context.i2cBase, &s_context.i2cHandle, DA7212_I2CCompletionCallback, NULL);

    /* Set the driver as busy */
    DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK); /* Set next state logic and write the register */

    /*Prepare to write reset configuration*/
    s_context.RegistersToWrite = DA7212_INIT_SIZE;
    s_context.WriteBlockRegister = &kInitRegisterSequence[0];

    s_context.RegisterOffset = 0;

    s_context.States.actualState = DA7212_WRITE_BLOCK_STATE;
    s_context.States.nextState = DA7212_CONTROL_STATE_WAIT_COMM;
    s_context.States.prevState = DA7212_CONTROL_STATE_IDLE;

    DA7212_Run();
}

void DA7212_ChangeInput(eDA7212InputReg DA7212_Input)
{
    DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK); /* Set next state logic and write the register */

    /*Prepare to write reset configuration*/
    s_context.RegistersToWrite = sizeof(kInputRegisterSequence[DA7212_Input]) / sizeof(da7212_register_value_t);
    s_context.WriteBlockRegister = &kInputRegisterSequence[DA7212_Input][0];

    s_context.RegisterOffset = 0;
    s_context.States.actualState = DA7212_WRITE_BLOCK_STATE;
    s_context.States.nextState = DA7212_CONTROL_STATE_WAIT_COMM;
    s_context.States.prevState = DA7212_CONTROL_STATE_IDLE;

    DA7212_Run();
}

void DA7212_ChangeOutput(eDA7212OutputReg DA7212_Output)
{
    DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK); /* Set next state logic and write the register */

    /*Prepare to write reset configuration*/

    s_context.RegistersToWrite = sizeof(kOutputRegisterSequence[DA7212_Output]) / sizeof(da7212_register_value_t);
    s_context.WriteBlockRegister = &kOutputRegisterSequence[DA7212_Output][0];

    s_context.RegisterOffset = 0;
    s_context.States.actualState = DA7212_WRITE_BLOCK_STATE;
    s_context.States.nextState = DA7212_CONTROL_STATE_WAIT_COMM;
    s_context.States.prevState = DA7212_CONTROL_STATE_IDLE;

    DA7212_Run();
}

static void DA7212_IdleState(void)
{
    DA7212_CLEAR_STATUS(DA7212_STATUS_BUSY_MASK);
}

uint8_t DA7212_ChangeHPVolume(uint8_t bDigitalGaindBIndex)
{
    uint8_t bStatus = ERROR;

    if (!DA7212_CONTROL_BUSY)
    {
        /* Set the driver as busy */
        DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK);
        /* Clear configured flag since will be configured again */
        DA7212_CLEAR_STATUS(DA7212_STATUS_CONFIGURED_MASK);

        s_context.RegistersToChange[0].addr = DIALOG7212_DAC_L_GAIN;
        s_context.RegistersToChange[0].value = kVolumeControlValues[bDigitalGaindBIndex];
        s_context.RegistersToChange[1].addr = DIALOG7212_DAC_R_GAIN;
        s_context.RegistersToChange[1].value = kVolumeControlValues[bDigitalGaindBIndex];

        s_context.RegistersToWrite = 2;
        s_context.WriteBlockRegister = &s_context.RegistersToChange[0];
        s_context.RegisterOffset = 0;

        s_context.States.actualState = DA7212_CONTROL_STATE_WAIT_COMM;
        s_context.States.nextState = DA7212_WRITE_BLOCK_STATE;

        bStatus = OK;
    }
    else
    {
        DA7212_SET_STATUS(DA7212_STATUS_CONFIGURED_MASK);
        s_context.States.actualState = DA7212_CONTROL_STATE_IDLE;
        s_context.States.nextState = DA7212_CONTROL_STATE_WAIT_TIMEOUT;
    }

    DA7212_Run();

    return (bStatus);
}

void DA7212_Mute(uint8_t bMuteStatus)
{
    DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK);

    if (DA7212_MUTE_ON == bMuteStatus)
    {
        s_context.RegistersToChange[0].value = DA7212_DAC_MUTE_ENABLED;
        s_context.RegistersToChange[1].value = DA7212_DAC_MUTE_ENABLED;
    }
    else
    {
        s_context.RegistersToChange[0].value = DA7212_DAC_MUTE_DISABLED;
        s_context.RegistersToChange[1].value = DA7212_DAC_MUTE_DISABLED;
    }

    s_context.RegistersToChange[0].addr = DIALOG7212_DAC_L_CTRL;
    s_context.RegistersToChange[1].addr = DIALOG7212_DAC_R_CTRL;

    s_context.RegistersToWrite = 2;
    s_context.WriteBlockRegister = &s_context.RegistersToChange[0];

    s_context.States.actualState = DA7212_WRITE_BLOCK_STATE;

    DA7212_Run();
}

uint8_t DA7212_ChangeFrequency(eDa7212SysFs dwNewFreqValue)
{
    uint8_t bStatus = ERROR;

#if (DIALOG7212_MASTER == TRUE)

    /* confirm the new frequency is valid */
    if (DA7212_SYS_FS_8K == dwNewFreqValue || DA7212_SYS_FS_16K == dwNewFreqValue ||
        DA7212_SYS_FS_32K == dwNewFreqValue || DA7212_SYS_FS_44_1K == dwNewFreqValue ||
        DA7212_SYS_FS_48K == dwNewFreqValue || DA7212_SYS_FS_96K == dwNewFreqValue)
    {
        /* Set the driver as busy */
        DA7212_SET_STATUS(DA7212_STATUS_BUSY_MASK);
        /* Clear configured flag since will be configured again */
        DA7212_CLEAR_STATUS(DA7212_STATUS_CONFIGURED_MASK);

        /* set up the register and values table to be used */
        if (DA7212_SYS_FS_44_1K == dwNewFreqValue || DA7212_SYS_FS_44_1K == s_context.SysFs)
        {
            /* the amount of registers to write changes when 44.1hz is selected */
            s_context.RegistersToWrite = DA7212_441_PLL_REGISTERS_TO_WRITE;
        }
        else
        {
            s_context.RegistersToWrite = DA7212_16KHZ_32KHZ_48KHZ_96KHZ_PLL_REGISTERS_TO_WRITE;
        }

        /* set the new frequency */
        s_context.SysFs = dwNewFreqValue;

        /* set up the write block registers to the proper tables */
        s_context.WriteBlockRegister = &kChangeFreqValues[dwNewFreqValue][0];
        s_context.RegisterOffset = 0;

        s_context.States.actualState = DA7212_WRITE_BLOCK_STATE;
        s_context.States.nextState = DA7212_CONTROL_STATE_WAIT_COMM;
    }
    else
    {
        DA7212_SET_STATUS(DA7212_STATUS_CONFIGURED_MASK);
        s_context.States.actualState = DA7212_CONTROL_STATE_IDLE;
        s_context.States.nextState = DA7212_CONTROL_STATE_IDLE;
    }
    bStatus = OK;

#else
    iAPSSIMaster_ChangeFreq(dwNewFreqValue);
#endif

    DA7212_Run();

    return (bStatus);
}

static void DA7212_WaitCommState(void)
{
    if (s_context.i2cTransferCompleted)
    {
        if (s_context.i2cTransferStatus == kStatus_Success)
        {
            s_context.States.actualState = s_context.States.nextState;
        }
        else
        {
            /* a NACK or time out was received*/
            DA7212_SET_STATUS(DA7212_STATUS_I2C_ERROR_MASK);
            s_context.States.actualState = s_context.States.nextState;
        }
    }
}

static void DA7212_WriteBlockState(void)
{
    /*retries if the I2C driver reported an error*/
    if (DA7212_CHECK_STATUS(DA7212_STATUS_I2C_ERROR_MASK))
    {
        s_context.RegisterOffset--;
        DA7212_CLEAR_STATUS(DA7212_STATUS_I2C_ERROR_MASK);
    }

    /* Check if there is any other write registers */
    if (s_context.RegisterOffset < s_context.RegistersToWrite)
    {
        /* Take the register and the data to be written */
        DA7212_WriteRegister(s_context.WriteBlockRegister[s_context.RegisterOffset].addr,
                             s_context.WriteBlockRegister[s_context.RegisterOffset].value);

        s_context.States.actualState = DA7212_CONTROL_STATE_WAIT_COMM;
        s_context.States.nextState = DA7212_WRITE_BLOCK_STATE;
        s_context.RegisterOffset++;
    }
    else
    {
        /* if this isn't the startup block write */
        if (DA7212_CHECK_STATUS(DA7212_STATUS_STARTUP_DONE_MASK))
        {
            DA7212_SET_STATUS(DA7212_STATUS_CONFIGURED_MASK);
            s_context.States.actualState = DA7212_CONTROL_STATE_IDLE;
        }
        else
        {
            /* a >40ms delay is required after initialization to enable the LDO 						*/
            /* From Dialog Apps Engineer: This allows the bandgap internal voltage reference to settle	*/

            s_context.startTime = ar_get_millisecond_count();

            /* reserve a timer and start it */
            //  			gbs_context.LDOTimer = SWTimer_AllocateChannel(DA7212_50MS_TIMEOUT,DA7212_SWTimerCallback);
            //  			SWTimer_EnableTimer(gbs_context.LDOTimer);

            /* set the startup done mask */
            DA7212_SET_STATUS(DA7212_STATUS_STARTUP_DONE_MASK);

            /* wait for the delay */
            s_context.States.actualState = DA7212_CONTROL_STATE_WAIT_TIMEOUT;
        }

        /* When finished, set IDLE state to Actual and Next states */
        s_context.RegisterOffset = 0;
    }
}

static void DA7212_TimeoutState(void)
{
    uint32_t now = ar_get_millisecond_count();

    /* poll the SW timer */
    // 	if(DA7212_TimeOutFlag)
    if (now - s_context.startTime >= 40)
    {
        /* once the SW timer has expired, enable the LDO*/
        DA7212_WriteRegister(DIALOG7212_LDO_CTRL, DIALOG7212_LDO_CTRL_EN_MASK);

        /* the timer won't be needed, release it */
        // 		DA7212_TimeOutFlag = 0;
        // 		SWTimer_DisableTimer(gbs_context.LDOTimer);
        /* go to idle */
        s_context.States.nextState = DA7212_CONTROL_STATE_IDLE;
    }
}

// void DA7212_SWTimerCallback (void)
// {
// 	DA7212_TimeOutFlag = 1;
// }

///////////////////////////////////////////////////////////////////////////////////////////////////
// EOF
///////////////////////////////////////////////////////////////////////////////////////////////////
